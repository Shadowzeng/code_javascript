(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{JuMs:function(t,e,i){"use strict";i.r(e),i.d(e,"MindmapViewerModule",function(){return k}),i.d(e,"MindmapViewerComponent",function(){return y});var n=i("rDax"),o=i("ofXK"),s=i("uW6A"),r=i("PqIU"),a=i("tyNb"),l=i("XNiG"),h=i("7o/Q"),c=i("D0XW");i("zx2A");const d={leading:!0,trailing:!1};class u{constructor(t,e,i,n){this.duration=t,this.scheduler=e,this.leading=i,this.trailing=n}call(t,e){return e.subscribe(new p(t,this.duration,this.scheduler,this.leading,this.trailing))}}class p extends h.a{constructor(t,e,i,n,o){super(t),this.duration=e,this.scheduler=i,this.leading=n,this.trailing=o,this._hasTrailingValue=!1,this._trailingValue=null}_next(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(b,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}function b(t){const{subscriber:e}=t;e.clearThrottle()}var g=i("XI1+"),m=i("fXoL"),_=i("KXLN");const w=new m.r("node-more-content");let f=(()=>{class t{constructor(t,e){this._overlayRef=t,this._content=e,this.markdown="",this.markdown=this._content}onClose(){this._overlayRef.detach()}}return t.\u0275fac=function(e){return new(e||t)(m.Lb(n.d),m.Lb(w))},t.\u0275cmp=m.Fb({type:t,selectors:[["app-node-more"]],decls:5,vars:1,consts:[[1,"header"],[3,"click"],[1,"body"],[3,"content"]],template:function(t,e){1&t&&(m.Ob(0,"div",0),m.Ob(1,"button",1),m.Vb("click",function(){return e.onClose()}),m.nc(2,"OK"),m.Nb(),m.Nb(),m.Ob(3,"div",2),m.Mb(4,"app-markdown-viewer",3),m.Nb()),2&t&&(m.Bb(4),m.cc("content",e.markdown))},directives:[_.a],styles:["[_nghost-%COMP%]{display:block;width:480px;height:320px;box-shadow:0 4px 8px rgba(0,0,0,.16);border-radius:4px;background-color:#fff;box-sizing:border-box;overflow:hidden}.header[_ngcontent-%COMP%]{padding:0 12px;height:32px}.body[_ngcontent-%COMP%]{padding:0 24px;height:calc(100% - 32px);overflow-y:auto}"]}),t})();var v=i("tk/3"),x=i("VjkH");let y=(()=>{class t{constructor(t,e,i){this._http=t,this._fileService=e,this._popupService=i,this._mapZoom$=new l.a}ngOnInit(){const t=Object(g.a)("viewer-map",{rootNode:{name:"Root"},readonly:!0});this._fileService.get().then(e=>{t.new(e)}),t.on("nodePayloadSelect",(t,e)=>{this._openMore(t,e.content)}),t.on("zoom",()=>{this._mapZoom$.next()})}ngAfterViewInit(){this._mapZoom$.pipe(function(t,e=c.a,i=d){return n=>n.lift(new u(t,e,i.leading,i.trailing))}(0)).subscribe(()=>{this._popupService.updatePosition()})}ngOnDestroy(){this._mapZoom$.complete()}_openMore(t,e){this._popupService.show({target:t,component:f,token:w,data:e})}}return t.\u0275fac=function(e){return new(e||t)(m.Lb(v.a),m.Lb(x.b),m.Lb(r.b))},t.\u0275cmp=m.Fb({type:t,selectors:[["app-mindmap-viewer"]],decls:1,vars:0,consts:[["id","viewer-map",1,"map-root"]],template:function(t,e){1&t&&m.Mb(0,"div",0)},styles:["[_nghost-%COMP%]{display:block}.map-root[_ngcontent-%COMP%], [_nghost-%COMP%]{height:100%}"]}),t})();const V=[{path:"",component:y,pathMatch:"full"}];let M=(()=>{class t{}return t.\u0275mod=m.Jb({type:t}),t.\u0275inj=m.Ib({factory:function(e){return new(e||t)},imports:[[a.b.forChild(V)],a.b]}),t})(),k=(()=>{class t{}return t.\u0275mod=m.Jb({type:t}),t.\u0275inj=m.Ib({factory:function(e){return new(e||t)},imports:[[n.c,o.c,s.MarkdownViewerModule,M,r.a]]}),t})()}}]);