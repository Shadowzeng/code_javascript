(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"+rOU":function(t,e,i){"use strict";i.d(e,"a",function(){return c}),i.d(e,"b",function(){return u}),i.d(e,"c",function(){return r}),i.d(e,"d",function(){return l}),i.d(e,"e",function(){return d}),i.d(e,"f",function(){return a});var n=i("fXoL"),o=i("ofXK");class s{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class r extends s{constructor(t,e,i,n){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=n}}class a extends s{constructor(t,e,i){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class h extends s{constructor(t){super(),this.element=t instanceof n.l?t.nativeElement:t}}class c{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof r?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof a?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof h?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class l extends c{constructor(t,e,i,n,o){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=n,this.attachDomPortal=t=>{const e=t.element,i=this._document.createComment("dom-portal");e.parentNode.insertBefore(i,e),this.outletElement.appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(e,i)})},this._document=o}attachComponentPortal(t){const e=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let i;return t.viewContainerRef?(i=t.viewContainerRef.createComponent(e,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=e.create(t.injector||this._defaultInjector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=t,i}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context);return i.rootNodes.forEach(t=>this.outletElement.appendChild(t)),i.detectChanges(),this.setDisposeFn(()=>{let t=e.indexOf(i);-1!==t&&e.remove(t)}),this._attachedPortal=t,i}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let u=(()=>{class t extends c{constructor(t,e,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=e,this._isInitialized=!1,this.attached=new n.n,this.attachDomPortal=t=>{const e=t.element,i=this._document.createComment("dom-portal");t.setAttachedHost(this),e.parentNode.insertBefore(i,e),this._getRootNode().appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(e,i)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){(!this.hasAttached()||t||this._isInitialized)&&(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const e=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),n=e.createComponent(i,e.length,t.injector||e.injector);return e!==this._viewContainerRef&&this._getRootNode().appendChild(n.hostView.rootNodes[0]),super.setDisposeFn(()=>n.destroy()),this._attachedPortal=t,this._attachedRef=n,this.attached.emit(n),n}attachTemplatePortal(t){t.setAttachedHost(this);const e=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=e,this.attached.emit(e),e}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return t.\u0275fac=function(e){return new(e||t)(n.Lb(n.j),n.Lb(n.Q),n.Lb(o.d))},t.\u0275dir=n.Gb({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[n.yb]}),t})(),d=(()=>{class t{}return t.\u0275mod=n.Jb({type:t}),t.\u0275inj=n.Ib({factory:function(e){return new(e||t)}}),t})()},"1G5W":function(t,e,i){"use strict";i.d(e,"a",function(){return o});var n=i("zx2A");function o(t){return e=>e.lift(new s(t))}class s{constructor(t){this.notifier=t}call(t,e){const i=new r(t),o=Object(n.c)(this.notifier,new n.a(i));return o&&!i.seenValue?(i.add(o),e.subscribe(i)):i}}class r extends n.b{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}},PqIU:function(t,e,i){"use strict";i.d(e,"a",function(){return c}),i.d(e,"b",function(){return h});var n=i("rDax"),o=i("ofXK"),s=i("+rOU"),r=i("fXoL"),a=i("quSY");let h=(()=>{class t{constructor(t,e){this._overlay=t,this._injector=e,this._subs=new a.a}ngOnDestroy(){this._subs.unsubscribe(),this._destroyPanel()}show(t){return this._targetElement=t.target,this._attachOverlay(t),this._overlayRef}updatePosition(){this._overlayRef&&this._overlayRef.updatePosition()}hide(){var t;null===(t=this._overlayRef)||void 0===t||t.detach(),this._subs.unsubscribe()}_attachOverlay(t){var e;if(this._overlayRef?null===(e=this._positionStrategy)||void 0===e||e.setOrigin(t.target):(this._overlayRef=this._createOverlayRef(),this._overlayRef.backdropClick().subscribe(()=>{this.hide()})),!this._overlayRef||this._overlayRef.hasAttached())return;const i=t.component,o=r.s.create({parent:this._injector,providers:[{provide:n.d,useValue:this._overlayRef},{provide:t.token,useValue:t.data}]}),a=new s.c(i,void 0,o);this._overlayRef.attach(a)}_createOverlayRef(){const t=new n.b;return this._positionStrategy=t.positionStrategy=this._overlay.position().flexibleConnectedTo(this._targetElement).withFlexibleDimensions(!1).withPush(!1).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"}]),t.scrollStrategy=this._overlay.scrollStrategies.reposition(),this._overlay.create(t)}_destroyPanel(){this._overlayRef&&(this.hide(),this._overlayRef.dispose(),this._overlayRef=null)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(n.a),r.Sb(r.s))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),c=(()=>{class t{}return t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({factory:function(e){return new(e||t)},providers:[h],imports:[[n.c,o.c]]}),t})()},"XI1+":function(t,e,i){"use strict";i.d(e,"a",function(){return yn});var n={value:()=>{}};function o(){for(var t,e=0,i=arguments.length,n={};e<i;++e){if(!(t=arguments[e]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new s(n)}function s(t){this._=t}function r(t,e){return t.trim().split(/^|\s+/).map(function(t){var i="",n=t.indexOf(".");if(n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}function a(t,e){for(var i,n=0,o=t.length;n<o;++n)if((i=t[n]).name===e)return i.value}function h(t,e,i){for(var o=0,s=t.length;o<s;++o)if(t[o].name===e){t[o]=n,t=t.slice(0,o).concat(t.slice(o+1));break}return null!=i&&t.push({name:e,value:i}),t}s.prototype=o.prototype={constructor:s,on:function(t,e){var i,n=this._,o=r(t+"",n),s=-1,c=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<c;)if(i=(t=o[s]).type)n[i]=h(n[i],t.name,e);else if(null==e)for(i in n)n[i]=h(n[i],t.name,null);return this}for(;++s<c;)if((i=(t=o[s]).type)&&(i=a(n[i],t.name)))return i},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new s(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var i,n,o=new Array(i),s=0;s<i;++s)o[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,i=(n=this._[t]).length;s<i;++s)n[s].value.apply(e,o)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],o=0,s=n.length;o<s;++o)n[o].value.apply(e,i)}};var c=o;function l(){}var u=function(t){return null==t?l:function(){return this.querySelector(t)}},d=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)};function p(){return[]}var f=function(t){return null==t?p:function(){return this.querySelectorAll(t)}},g=function(t){return function(){return this.matches(t)}};function m(t){return function(e){return e.matches(t)}}var _=Array.prototype.find;function y(){return this.firstElementChild}var v=Array.prototype.filter;function b(){return this.children}var w=function(t){return new Array(t.length)};function x(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}x.prototype={constructor:x,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var S=function(t){return function(){return t}};function O(t,e,i,n,o,s){for(var r,a=0,h=e.length,c=s.length;a<c;++a)(r=e[a])?(r.__data__=s[a],n[a]=r):i[a]=new x(t,s[a]);for(;a<h;++a)(r=e[a])&&(o[a]=r)}function N(t,e,i,n,o,s,r){var a,h,c,l=new Map,u=e.length,d=s.length,p=new Array(u);for(a=0;a<u;++a)(h=e[a])&&(p[a]=c=r.call(h,h.__data__,a,e)+"",l.has(c)?o[a]=h:l.set(c,h));for(a=0;a<d;++a)c=r.call(t,s[a],a,s)+"",(h=l.get(c))?(n[a]=h,h.__data__=s[a],l.delete(c)):i[a]=new x(t,s[a]);for(a=0;a<u;++a)(h=e[a])&&l.get(p[a])===h&&(o[a]=h)}function k(t){return t.__data__}function C(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var R="http://www.w3.org/1999/xhtml",P={svg:"http://www.w3.org/2000/svg",xhtml:R,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},E=function(t){var e=t+="",i=e.indexOf(":");return i>=0&&"xmlns"!==(e=t.slice(0,i))&&(t=t.slice(i+1)),P.hasOwnProperty(e)?{space:P[e],local:t}:t};function A(t){return function(){this.removeAttribute(t)}}function z(t){return function(){this.removeAttributeNS(t.space,t.local)}}function M(t,e){return function(){this.setAttribute(t,e)}}function j(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function T(t,e){return function(){var i=e.apply(this,arguments);null==i?this.removeAttribute(t):this.setAttribute(t,i)}}function D(t,e){return function(){var i=e.apply(this,arguments);null==i?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}}var B=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function L(t){return function(){this.style.removeProperty(t)}}function I(t,e,i){return function(){this.style.setProperty(t,e,i)}}function H(t,e,i){return function(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,i)}}function X(t,e){return t.style.getPropertyValue(e)||B(t).getComputedStyle(t,null).getPropertyValue(e)}function F(t){return function(){delete this[t]}}function V(t,e){return function(){this[t]=e}}function Y(t,e){return function(){var i=e.apply(this,arguments);null==i?delete this[t]:this[t]=i}}function W(t){return t.trim().split(/^|\s+/)}function q(t){return t.classList||new Z(t)}function Z(t){this._node=t,this._names=W(t.getAttribute("class")||"")}function U(t,e){for(var i=q(t),n=-1,o=e.length;++n<o;)i.add(e[n])}function G(t,e){for(var i=q(t),n=-1,o=e.length;++n<o;)i.remove(e[n])}function K(t){return function(){U(this,t)}}function J(t){return function(){G(this,t)}}function $(t,e){return function(){(e.apply(this,arguments)?U:G)(this,t)}}function Q(){this.textContent=""}function tt(t){return function(){this.textContent=t}}function et(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function it(){this.innerHTML=""}function nt(t){return function(){this.innerHTML=t}}function ot(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function st(){this.nextSibling&&this.parentNode.appendChild(this)}function rt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function at(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===R&&e.documentElement.namespaceURI===R?e.createElement(t):e.createElementNS(i,t)}}function ht(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}Z.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ct=function(t){var e=E(t);return(e.local?ht:at)(e)};function lt(){return null}function ut(){var t=this.parentNode;t&&t.removeChild(this)}function dt(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function pt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ft(t){return t.trim().split(/^|\s+/).map(function(t){var e="",i=t.indexOf(".");return i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}})}function gt(t){return function(){var e=this.__on;if(e){for(var i,n=0,o=-1,s=e.length;n<s;++n)i=e[n],t.type&&i.type!==t.type||i.name!==t.name?e[++o]=i:this.removeEventListener(i.type,i.listener,i.options);++o?e.length=o:delete this.__on}}}function mt(t,e,i){return function(){var n,o=this.__on,s=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(o)for(var r=0,a=o.length;r<a;++r)if((n=o[r]).type===t.type&&n.name===t.name)return this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=s,n.options=i),void(n.value=e);this.addEventListener(t.type,s,i),n={type:t.type,name:t.name,value:e,listener:s,options:i},o?o.push(n):this.__on=[n]}}function _t(t,e,i){var n=B(t),o=n.CustomEvent;"function"==typeof o?o=new o(e,i):(o=n.document.createEvent("Event"),i?(o.initEvent(e,i.bubbles,i.cancelable),o.detail=i.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function yt(t,e){return function(){return _t(this,t,e)}}function vt(t,e){return function(){return _t(this,t,e.apply(this,arguments))}}var bt=[null];function wt(t,e){this._groups=t,this._parents=e}function xt(){return new wt([[document.documentElement]],bt)}wt.prototype=xt.prototype={constructor:wt,select:function(t){"function"!=typeof t&&(t=u(t));for(var e=this._groups,i=e.length,n=new Array(i),o=0;o<i;++o)for(var s,r,a=e[o],h=a.length,c=n[o]=new Array(h),l=0;l<h;++l)(s=a[l])&&(r=t.call(s,s.__data__,l,a))&&("__data__"in s&&(r.__data__=s.__data__),c[l]=r);return new wt(n,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);return null==e?[]:d(e)}}(t):f(t);for(var e=this._groups,i=e.length,n=[],o=[],s=0;s<i;++s)for(var r,a=e[s],h=a.length,c=0;c<h;++c)(r=a[c])&&(n.push(t.call(r,r.__data__,c,a)),o.push(r));return new wt(n,o)},selectChild:function(t){return this.select(null==t?y:function(t){return function(){return _.call(this.children,t)}}("function"==typeof t?t:m(t)))},selectChildren:function(t){return this.selectAll(null==t?b:function(t){return function(){return v.call(this.children,t)}}("function"==typeof t?t:m(t)))},filter:function(t){"function"!=typeof t&&(t=g(t));for(var e=this._groups,i=e.length,n=new Array(i),o=0;o<i;++o)for(var s,r=e[o],a=r.length,h=n[o]=[],c=0;c<a;++c)(s=r[c])&&t.call(s,s.__data__,c,r)&&h.push(s);return new wt(n,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,k);var i=e?N:O,n=this._parents,o=this._groups;"function"!=typeof t&&(t=S(t));for(var s=o.length,r=new Array(s),a=new Array(s),h=new Array(s),c=0;c<s;++c){var l=n[c],u=o[c],p=u.length,f=d(t.call(l,l&&l.__data__,c,n)),g=f.length,m=a[c]=new Array(g),_=r[c]=new Array(g),y=h[c]=new Array(p);i(l,u,m,_,y,f,e);for(var v,b,w=0,x=0;w<g;++w)if(v=m[w]){for(w>=x&&(x=w+1);!(b=_[x])&&++x<g;);v._next=b||null}}return(r=new wt(r,n))._enter=a,r._exit=h,r},enter:function(){return new wt(this._enter||this._groups.map(w),this._parents)},exit:function(){return new wt(this._exit||this._groups.map(w),this._parents)},join:function(t,e,i){var n=this.enter(),o=this,s=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=e&&(o=e(o)),null==i?s.remove():i(s),n&&o?n.merge(o).order():o},merge:function(t){if(!(t instanceof wt))throw new Error("invalid merge");for(var e=this._groups,i=t._groups,n=e.length,o=Math.min(n,i.length),s=new Array(n),r=0;r<o;++r)for(var a,h=e[r],c=i[r],l=h.length,u=s[r]=new Array(l),d=0;d<l;++d)(a=h[d]||c[d])&&(u[d]=a);for(;r<n;++r)s[r]=e[r];return new wt(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,i=t.length;++e<i;)for(var n,o=t[e],s=o.length-1,r=o[s];--s>=0;)(n=o[s])&&(r&&4^n.compareDocumentPosition(r)&&r.parentNode.insertBefore(n,r),r=n);return this},sort:function(t){function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}t||(t=C);for(var i=this._groups,n=i.length,o=new Array(n),s=0;s<n;++s){for(var r,a=i[s],h=a.length,c=o[s]=new Array(h),l=0;l<h;++l)(r=a[l])&&(c[l]=r);c.sort(e)}return new wt(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n=t[e],o=0,s=n.length;o<s;++o){var r=n[o];if(r)return r}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,i=0,n=e.length;i<n;++i)for(var o,s=e[i],r=0,a=s.length;r<a;++r)(o=s[r])&&t.call(o,o.__data__,r,s);return this},attr:function(t,e){var i=E(t);if(arguments.length<2){var n=this.node();return i.local?n.getAttributeNS(i.space,i.local):n.getAttribute(i)}return this.each((null==e?i.local?z:A:"function"==typeof e?i.local?D:T:i.local?j:M)(i,e))},style:function(t,e,i){return arguments.length>1?this.each((null==e?L:"function"==typeof e?H:I)(t,e,null==i?"":i)):X(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?F:"function"==typeof e?Y:V)(t,e)):this.node()[t]},classed:function(t,e){var i=W(t+"");if(arguments.length<2){for(var n=q(this.node()),o=-1,s=i.length;++o<s;)if(!n.contains(i[o]))return!1;return!0}return this.each(("function"==typeof e?$:e?K:J)(i,e))},text:function(t){return arguments.length?this.each(null==t?Q:("function"==typeof t?et:tt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?it:("function"==typeof t?ot:nt)(t)):this.node().innerHTML},raise:function(){return this.each(st)},lower:function(){return this.each(rt)},append:function(t){var e="function"==typeof t?t:ct(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var i="function"==typeof t?t:ct(t),n=null==e?lt:"function"==typeof e?e:u(e);return this.select(function(){return this.insertBefore(i.apply(this,arguments),n.apply(this,arguments)||null)})},remove:function(){return this.each(ut)},clone:function(t){return this.select(t?pt:dt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,i){var n,o,s=ft(t+""),r=s.length;if(!(arguments.length<2)){for(a=e?mt:gt,n=0;n<r;++n)this.each(a(s[n],e,i));return this}var a=this.node().__on;if(a)for(var h,c=0,l=a.length;c<l;++c)for(n=0,h=a[c];n<r;++n)if((o=s[n]).type===h.type&&o.name===h.name)return h.value},dispatch:function(t,e){return this.each(("function"==typeof e?vt:yt)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n,o=t[e],s=0,r=o.length;s<r;++s)(n=o[s])&&(yield n)}};var St=xt,Ot=function(t){return"string"==typeof t?new wt([[document.querySelector(t)]],[document.documentElement]):new wt([[t]],bt)};function Nt(t){t.stopImmediatePropagation()}var kt=function(t){t.preventDefault(),t.stopImmediatePropagation()},Ct=function(t){var e=t.document.documentElement,i=Ot(t).on("dragstart.drag",kt,!0);"onselectstart"in e?i.on("selectstart.drag",kt,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function Rt(t,e){var i=t.document.documentElement,n=Ot(t).on("dragstart.drag",null);e&&(n.on("click.drag",kt,!0),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in i?n.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}var Pt=function(t,e,i){t.prototype=e.prototype=i,i.constructor=t};function Et(t,e){var i=Object.create(t.prototype);for(var n in e)i[n]=e[n];return i}function At(){}var zt=.7,Mt=1/zt,jt="\\s*([+-]?\\d+)\\s*",Tt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Dt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Bt=/^#([0-9a-f]{3,8})$/,Lt=new RegExp("^rgb\\("+[jt,jt,jt]+"\\)$"),It=new RegExp("^rgb\\("+[Dt,Dt,Dt]+"\\)$"),Ht=new RegExp("^rgba\\("+[jt,jt,jt,Tt]+"\\)$"),Xt=new RegExp("^rgba\\("+[Dt,Dt,Dt,Tt]+"\\)$"),Ft=new RegExp("^hsl\\("+[Tt,Dt,Dt]+"\\)$"),Vt=new RegExp("^hsla\\("+[Tt,Dt,Dt,Tt]+"\\)$"),Yt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Wt(){return this.rgb().formatHex()}function qt(){return this.rgb().formatRgb()}function Zt(t){var e,i;return t=(t+"").trim().toLowerCase(),(e=Bt.exec(t))?(i=e[1].length,e=parseInt(e[1],16),6===i?Ut(e):3===i?new $t(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===i?Gt(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===i?Gt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Lt.exec(t))?new $t(e[1],e[2],e[3],1):(e=It.exec(t))?new $t(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Ht.exec(t))?Gt(e[1],e[2],e[3],e[4]):(e=Xt.exec(t))?Gt(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ft.exec(t))?ie(e[1],e[2]/100,e[3]/100,1):(e=Vt.exec(t))?ie(e[1],e[2]/100,e[3]/100,e[4]):Yt.hasOwnProperty(t)?Ut(Yt[t]):"transparent"===t?new $t(NaN,NaN,NaN,0):null}function Ut(t){return new $t(t>>16&255,t>>8&255,255&t,1)}function Gt(t,e,i,n){return n<=0&&(t=e=i=NaN),new $t(t,e,i,n)}function Kt(t){return t instanceof At||(t=Zt(t)),t?new $t((t=t.rgb()).r,t.g,t.b,t.opacity):new $t}function Jt(t,e,i,n){return 1===arguments.length?Kt(t):new $t(t,e,i,null==n?1:n)}function $t(t,e,i,n){this.r=+t,this.g=+e,this.b=+i,this.opacity=+n}function Qt(){return"#"+ee(this.r)+ee(this.g)+ee(this.b)}function te(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function ee(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function ie(t,e,i,n){return n<=0?t=e=i=NaN:i<=0||i>=1?t=e=NaN:e<=0&&(t=NaN),new oe(t,e,i,n)}function ne(t){if(t instanceof oe)return new oe(t.h,t.s,t.l,t.opacity);if(t instanceof At||(t=Zt(t)),!t)return new oe;if(t instanceof oe)return t;var e=(t=t.rgb()).r/255,i=t.g/255,n=t.b/255,o=Math.min(e,i,n),s=Math.max(e,i,n),r=NaN,a=s-o,h=(s+o)/2;return a?(r=e===s?(i-n)/a+6*(i<n):i===s?(n-e)/a+2:(e-i)/a+4,a/=h<.5?s+o:2-s-o,r*=60):a=h>0&&h<1?0:r,new oe(r,a,h,t.opacity)}function oe(t,e,i,n){this.h=+t,this.s=+e,this.l=+i,this.opacity=+n}function se(t,e,i){return 255*(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)}function re(t,e,i,n,o){var s=t*t,r=s*t;return((1-3*t+3*s-r)*e+(4-6*s+3*r)*i+(1+3*t+3*s-3*r)*n+r*o)/6}Pt(At,Zt,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Wt,formatHex:Wt,formatHsl:function(){return ne(this).formatHsl()},formatRgb:qt,toString:qt}),Pt($t,Jt,Et(At,{brighter:function(t){return t=null==t?Mt:Math.pow(Mt,t),new $t(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?zt:Math.pow(zt,t),new $t(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qt,formatHex:Qt,formatRgb:te,toString:te})),Pt(oe,function(t,e,i,n){return 1===arguments.length?ne(t):new oe(t,e,i,null==n?1:n)},Et(At,{brighter:function(t){return t=null==t?Mt:Math.pow(Mt,t),new oe(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?zt:Math.pow(zt,t),new oe(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,n=i+(i<.5?i:1-i)*e,o=2*i-n;return new $t(se(t>=240?t-240:t+120,o,n),se(t,o,n),se(t<120?t+240:t-120,o,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var ae=t=>()=>t;function he(t,e){var i=e-t;return i?function(t,e){return function(i){return t+i*e}}(t,i):ae(isNaN(t)?e:t)}var ce=function t(e){var i=function(t){return 1==(t=+t)?he:function(e,i){return i-e?function(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(n){return Math.pow(t+n*e,i)}}(e,i,t):ae(isNaN(e)?i:e)}}(e);function n(t,e){var n=i((t=Jt(t)).r,(e=Jt(e)).r),o=i(t.g,e.g),s=i(t.b,e.b),r=he(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=o(e),t.b=s(e),t.opacity=r(e),t+""}}return n.gamma=t,n}(1);function le(t){return function(e){var i,n,o=e.length,s=new Array(o),r=new Array(o),a=new Array(o);for(i=0;i<o;++i)n=Jt(e[i]),s[i]=n.r||0,r[i]=n.g||0,a[i]=n.b||0;return s=t(s),r=t(r),a=t(a),n.opacity=1,function(t){return n.r=s(t),n.g=r(t),n.b=a(t),n+""}}}le(function(t){var e=t.length-1;return function(i){var n=i<=0?i=0:i>=1?(i=1,e-1):Math.floor(i*e),o=t[n],s=t[n+1];return re((i-n/e)*e,n>0?t[n-1]:2*o-s,o,s,n<e-1?t[n+2]:2*s-o)}}),le(function(t){var e=t.length;return function(i){var n=Math.floor(((i%=1)<0?++i:i)*e);return re((i-n/e)*e,t[(n+e-1)%e],t[n%e],t[(n+1)%e],t[(n+2)%e])}});var ue,de,pe=function(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}},fe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ge=new RegExp(fe.source,"g"),me=function(t,e){var i,n,o,s=fe.lastIndex=ge.lastIndex=0,r=-1,a=[],h=[];for(t+="",e+="";(i=fe.exec(t))&&(n=ge.exec(e));)(o=n.index)>s&&(o=e.slice(s,o),a[r]?a[r]+=o:a[++r]=o),(i=i[0])===(n=n[0])?a[r]?a[r]+=n:a[++r]=n:(a[++r]=null,h.push({i:r,x:pe(i,n)})),s=ge.lastIndex;return s<e.length&&(o=e.slice(s),a[r]?a[r]+=o:a[++r]=o),a.length<2?h[0]?function(t){return function(e){return t(e)+""}}(h[0].x):function(t){return function(){return t}}(e):(e=h.length,function(t){for(var i,n=0;n<e;++n)a[(i=h[n]).i]=i.x(t);return a.join("")})},_e=function(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var i=e.ownerSVGElement||e;if(i.createSVGPoint){var n=i.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,[(n=n.matrixTransform(e.getScreenCTM().inverse())).x,n.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]},ye=0,ve=0,be=0,we=0,xe=0,Se=0,Oe="object"==typeof performance&&performance.now?performance:Date,Ne="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ke(){return xe||(Ne(Ce),xe=Oe.now()+Se)}function Ce(){xe=0}function Re(){this._call=this._time=this._next=null}function Pe(t,e,i){var n=new Re;return n.restart(t,e,i),n}function Ee(){xe=(we=Oe.now())+Se,ye=ve=0;try{!function(){ke(),++ye;for(var t,e=ue;e;)(t=xe-e._time)>=0&&e._call.call(null,t),e=e._next;--ye}()}finally{ye=0,function(){for(var t,e,i=ue,n=1/0;i;)i._call?(n>i._time&&(n=i._time),t=i,i=i._next):(e=i._next,i._next=null,i=t?t._next=e:ue=e);de=t,ze(n)}(),xe=0}}function Ae(){var t=Oe.now(),e=t-we;e>1e3&&(Se-=e,we=t)}function ze(t){ye||(ve&&(ve=clearTimeout(ve)),t-xe>24?(t<1/0&&(ve=setTimeout(Ee,t-Oe.now()-Se)),be&&(be=clearInterval(be))):(be||(we=Oe.now(),be=setInterval(Ae,1e3)),ye=1,Ne(Ee)))}Re.prototype=Pe.prototype={constructor:Re,restart:function(t,e,i){if("function"!=typeof t)throw new TypeError("callback is not a function");i=(null==i?ke():+i)+(null==e?0:+e),this._next||de===this||(de?de._next=this:ue=this,de=this),this._call=t,this._time=i,ze()},stop:function(){this._call&&(this._call=null,this._time=1/0,ze())}};var Me=function(t,e,i){var n=new Re;return n.restart(i=>{n.stop(),t(i+e)},e=null==e?0:+e,i),n},je=c("start","end","cancel","interrupt"),Te=[],De=function(t,e,i,n,o,s){var r=t.__transition;if(r){if(i in r)return}else t.__transition={};!function(t,e,i){var n,o=t.__transition;function s(h){var c,l,u,d;if(1!==i.state)return a();for(c in o)if((d=o[c]).name===i.name){if(3===d.state)return Me(s);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete o[c]):+c<e&&(d.state=6,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete o[c])}if(Me(function(){3===i.state&&(i.state=4,i.timer.restart(r,i.delay,i.time),r(h))}),i.state=2,i.on.call("start",t,t.__data__,i.index,i.group),2===i.state){for(i.state=3,n=new Array(u=i.tween.length),c=0,l=-1;c<u;++c)(d=i.tween[c].value.call(t,t.__data__,i.index,i.group))&&(n[++l]=d);n.length=l+1}}function r(e){for(var o=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(a),i.state=5,1),s=-1,r=n.length;++s<r;)n[s].call(t,o);5===i.state&&(i.on.call("end",t,t.__data__,i.index,i.group),a())}function a(){for(var n in i.state=6,i.timer.stop(),delete o[e],o)return;delete t.__transition}o[e]=i,i.timer=Pe(function(t){i.state=1,i.timer.restart(s,i.delay,i.time),i.delay<=t&&s(t-i.delay)},0,i.time)}(t,i,{name:e,index:n,group:o,on:je,tween:Te,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})};function Be(t,e){var i=Ie(t,e);if(i.state>0)throw new Error("too late; already scheduled");return i}function Le(t,e){var i=Ie(t,e);if(i.state>3)throw new Error("too late; already running");return i}function Ie(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}var He,Xe=function(t,e){var i,n,o,s=t.__transition,r=!0;if(s){for(o in e=null==e?null:e+"",s)(i=s[o]).name===e?(n=i.state>2&&i.state<5,i.state=6,i.timer.stop(),i.on.call(n?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete s[o]):r=!1;r&&delete t.__transition}},Fe=180/Math.PI,Ve={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Ye=function(t,e,i,n,o,s){var r,a,h;return(r=Math.sqrt(t*t+e*e))&&(t/=r,e/=r),(h=t*i+e*n)&&(i-=t*h,n-=e*h),(a=Math.sqrt(i*i+n*n))&&(i/=a,n/=a,h/=a),t*n<e*i&&(t=-t,e=-e,h=-h,r=-r),{translateX:o,translateY:s,rotate:Math.atan2(e,t)*Fe,skewX:Math.atan(h)*Fe,scaleX:r,scaleY:a}};function We(t,e,i,n){function o(t){return t.length?t.pop()+" ":""}return function(s,r){var a=[],h=[];return s=t(s),r=t(r),function(t,n,o,s,r,a){if(t!==o||n!==s){var h=r.push("translate(",null,e,null,i);a.push({i:h-4,x:pe(t,o)},{i:h-2,x:pe(n,s)})}else(o||s)&&r.push("translate("+o+e+s+i)}(s.translateX,s.translateY,r.translateX,r.translateY,a,h),function(t,e,i,s){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),s.push({i:i.push(o(i)+"rotate(",null,n)-2,x:pe(t,e)})):e&&i.push(o(i)+"rotate("+e+n)}(s.rotate,r.rotate,a,h),function(t,e,i,s){t!==e?s.push({i:i.push(o(i)+"skewX(",null,n)-2,x:pe(t,e)}):e&&i.push(o(i)+"skewX("+e+n)}(s.skewX,r.skewX,a,h),function(t,e,i,n,s,r){if(t!==i||e!==n){var a=s.push(o(s)+"scale(",null,",",null,")");r.push({i:a-4,x:pe(t,i)},{i:a-2,x:pe(e,n)})}else 1===i&&1===n||s.push(o(s)+"scale("+i+","+n+")")}(s.scaleX,s.scaleY,r.scaleX,r.scaleY,a,h),s=r=null,function(t){for(var e,i=-1,n=h.length;++i<n;)a[(e=h[i]).i]=e.x(t);return a.join("")}}}var qe=We(function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ve:Ye(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),Ze=We(function(t){return null==t?Ve:(He||(He=document.createElementNS("http://www.w3.org/2000/svg","g")),He.setAttribute("transform",t),(t=He.transform.baseVal.consolidate())?Ye((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Ve)},", ",")",")");function Ue(t,e){var i,n;return function(){var o=Le(this,t),s=o.tween;if(s!==i)for(var r=0,a=(n=i=s).length;r<a;++r)if(n[r].name===e){(n=n.slice()).splice(r,1);break}o.tween=n}}function Ge(t,e,i){var n,o;if("function"!=typeof i)throw new Error;return function(){var s=Le(this,t),r=s.tween;if(r!==n){o=(n=r).slice();for(var a={name:e,value:i},h=0,c=o.length;h<c;++h)if(o[h].name===e){o[h]=a;break}h===c&&o.push(a)}s.tween=o}}function Ke(t,e,i){var n=t._id;return t.each(function(){var t=Le(this,n);(t.value||(t.value={}))[e]=i.apply(this,arguments)}),function(t){return Ie(t,n).value[e]}}var Je=function(t,e){var i;return("number"==typeof e?pe:e instanceof Zt?ce:(i=Zt(e))?(e=i,ce):me)(t,e)};function $e(t){return function(){this.removeAttribute(t)}}function Qe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ti(t,e,i){var n,o,s=i+"";return function(){var r=this.getAttribute(t);return r===s?null:r===n?o:o=e(n=r,i)}}function ei(t,e,i){var n,o,s=i+"";return function(){var r=this.getAttributeNS(t.space,t.local);return r===s?null:r===n?o:o=e(n=r,i)}}function ii(t,e,i){var n,o,s;return function(){var r,a,h=i(this);if(null!=h)return(r=this.getAttribute(t))===(a=h+"")?null:r===n&&a===o?s:(o=a,s=e(n=r,h));this.removeAttribute(t)}}function ni(t,e,i){var n,o,s;return function(){var r,a,h=i(this);if(null!=h)return(r=this.getAttributeNS(t.space,t.local))===(a=h+"")?null:r===n&&a===o?s:(o=a,s=e(n=r,h));this.removeAttributeNS(t.space,t.local)}}function oi(t,e){return function(i){this.setAttribute(t,e.call(this,i))}}function si(t,e){return function(i){this.setAttributeNS(t.space,t.local,e.call(this,i))}}function ri(t,e){var i,n;function o(){var o=e.apply(this,arguments);return o!==n&&(i=(n=o)&&si(t,o)),i}return o._value=e,o}function ai(t,e){var i,n;function o(){var o=e.apply(this,arguments);return o!==n&&(i=(n=o)&&oi(t,o)),i}return o._value=e,o}function hi(t,e){return function(){Be(this,t).delay=+e.apply(this,arguments)}}function ci(t,e){return e=+e,function(){Be(this,t).delay=e}}function li(t,e){return function(){Le(this,t).duration=+e.apply(this,arguments)}}function ui(t,e){return e=+e,function(){Le(this,t).duration=e}}function di(t,e){if("function"!=typeof e)throw new Error;return function(){Le(this,t).ease=e}}function pi(t,e,i){var n,o,s=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(e)?Be:Le;return function(){var r=s(this,t),a=r.on;a!==n&&(o=(n=a).copy()).on(e,i),r.on=o}}var fi=St.prototype.constructor;function gi(t){return function(){this.style.removeProperty(t)}}function mi(t,e,i){return function(n){this.style.setProperty(t,e.call(this,n),i)}}function _i(t,e,i){var n,o;function s(){var s=e.apply(this,arguments);return s!==o&&(n=(o=s)&&mi(t,s,i)),n}return s._value=e,s}function yi(t){return function(e){this.textContent=t.call(this,e)}}function vi(t){var e,i;function n(){var n=t.apply(this,arguments);return n!==i&&(e=(i=n)&&yi(n)),e}return n._value=t,n}var bi=0;function wi(t,e,i,n){this._groups=t,this._parents=e,this._name=i,this._id=n}function xi(){return++bi}var Si=St.prototype;wi.prototype=(function(t){return St().transition(t)}).prototype={constructor:wi,select:function(t){var e=this._name,i=this._id;"function"!=typeof t&&(t=u(t));for(var n=this._groups,o=n.length,s=new Array(o),r=0;r<o;++r)for(var a,h,c=n[r],l=c.length,d=s[r]=new Array(l),p=0;p<l;++p)(a=c[p])&&(h=t.call(a,a.__data__,p,c))&&("__data__"in a&&(h.__data__=a.__data__),d[p]=h,De(d[p],e,i,p,d,Ie(a,i)));return new wi(s,this._parents,e,i)},selectAll:function(t){var e=this._name,i=this._id;"function"!=typeof t&&(t=f(t));for(var n=this._groups,o=n.length,s=[],r=[],a=0;a<o;++a)for(var h,c=n[a],l=c.length,u=0;u<l;++u)if(h=c[u]){for(var d,p=t.call(h,h.__data__,u,c),g=Ie(h,i),m=0,_=p.length;m<_;++m)(d=p[m])&&De(d,e,i,m,p,g);s.push(p),r.push(h)}return new wi(s,r,e,i)},filter:function(t){"function"!=typeof t&&(t=g(t));for(var e=this._groups,i=e.length,n=new Array(i),o=0;o<i;++o)for(var s,r=e[o],a=r.length,h=n[o]=[],c=0;c<a;++c)(s=r[c])&&t.call(s,s.__data__,c,r)&&h.push(s);return new wi(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,n=e.length,o=Math.min(n,i.length),s=new Array(n),r=0;r<o;++r)for(var a,h=e[r],c=i[r],l=h.length,u=s[r]=new Array(l),d=0;d<l;++d)(a=h[d]||c[d])&&(u[d]=a);for(;r<n;++r)s[r]=e[r];return new wi(s,this._parents,this._name,this._id)},selection:function(){return new fi(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,i=xi(),n=this._groups,o=n.length,s=0;s<o;++s)for(var r,a=n[s],h=a.length,c=0;c<h;++c)if(r=a[c]){var l=Ie(r,e);De(r,t,i,c,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new wi(n,this._parents,t,i)},call:Si.call,nodes:Si.nodes,node:Si.node,size:Si.size,empty:Si.empty,each:Si.each,on:function(t,e){var i=this._id;return arguments.length<2?Ie(this.node(),i).on.on(t):this.each(pi(i,t,e))},attr:function(t,e){var i=E(t),n="transform"===i?Ze:Je;return this.attrTween(t,"function"==typeof e?(i.local?ni:ii)(i,n,Ke(this,"attr."+t,e)):null==e?(i.local?Qe:$e)(i):(i.local?ei:ti)(i,n,e))},attrTween:function(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;var n=E(t);return this.tween(i,(n.local?ri:ai)(n,e))},style:function(t,e,i){var n="transform"==(t+="")?qe:Je;return null==e?this.styleTween(t,function(t,e){var i,n,o;return function(){var s=X(this,t),r=(this.style.removeProperty(t),X(this,t));return s===r?null:s===i&&r===n?o:o=e(i=s,n=r)}}(t,n)).on("end.style."+t,gi(t)):"function"==typeof e?this.styleTween(t,function(t,e,i){var n,o,s;return function(){var r=X(this,t),a=i(this),h=a+"";return null==a&&(this.style.removeProperty(t),h=a=X(this,t)),r===h?null:r===n&&h===o?s:(o=h,s=e(n=r,a))}}(t,n,Ke(this,"style."+t,e))).each(function(t,e){var i,n,o,s,r="style."+e,a="end."+r;return function(){var h=Le(this,t),c=h.on,l=null==h.value[r]?s||(s=gi(e)):void 0;c===i&&o===l||(n=(i=c).copy()).on(a,o=l),h.on=n}}(this._id,t)):this.styleTween(t,function(t,e,i){var n,o,s=i+"";return function(){var r=X(this,t);return r===s?null:r===n?o:o=e(n=r,i)}}(t,n,e),i).on("end.style."+t,null)},styleTween:function(t,e,i){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;return this.tween(n,_i(t,e,null==i?"":i))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Ke(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,vi(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var i=this._id;if(t+="",arguments.length<2){for(var n,o=Ie(this.node(),i).tween,s=0,r=o.length;s<r;++s)if((n=o[s]).name===t)return n.value;return null}return this.each((null==e?Ue:Ge)(i,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?hi:ci)(e,t)):Ie(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?li:ui)(e,t)):Ie(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(di(e,t)):Ie(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var i=e.apply(this,arguments);if("function"!=typeof i)throw new Error;Le(this,t).ease=i}}(this._id,t))},end:function(){var t,e,i=this,n=i._id,o=i.size();return new Promise(function(s,r){var a={value:r},h={value:function(){0==--o&&s()}};i.each(function(){var i=Le(this,n),o=i.on;o!==t&&((e=(t=o).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(h)),i.on=e}),0===o&&s()})},[Symbol.iterator]:Si[Symbol.iterator]};var Oi={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ni(t,e){for(var i;!(i=t.__transition)||!(i=i[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return i}function ki(t){return{type:t}}St.prototype.interrupt=function(t){return this.each(function(){Xe(this,t)})},St.prototype.transition=function(t){var e,i;t instanceof wi?(e=t._id,t=t._name):(e=xi(),(i=Oi).time=ke(),t=null==t?null:t+"");for(var n=this._groups,o=n.length,s=0;s<o;++s)for(var r,a=n[s],h=a.length,c=0;c<h;++c)(r=a[c])&&De(r,t,e,c,a,i||Ni(r,e));return new wi(n,this._parents,t,e)},Math,["w","e"].map(ki),["n","s"].map(ki),["n","w","e","s","nw","ne","sw","se"].map(ki);var Ci=t=>()=>t;function Ri(t,{sourceEvent:e,subject:i,target:n,identifier:o,active:s,x:r,y:a,dx:h,dy:c,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:i,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:l}})}function Pi(t){return!t.ctrlKey&&!t.button}function Ei(){return this.parentNode}function Ai(t,e){return null==e?{x:t.x,y:t.y}:e}function zi(){return navigator.maxTouchPoints||"ontouchstart"in this}Ri.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};const Mi=Math.PI,ji=2*Mi,Ti=1e-6,Di=ji-Ti;function Bi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Li(){return new Bi}Bi.prototype=Li.prototype={constructor:Bi,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,i,n){this._+="Q"+ +t+","+ +e+","+(this._x1=+i)+","+(this._y1=+n)},bezierCurveTo:function(t,e,i,n,o,s){this._+="C"+ +t+","+ +e+","+ +i+","+ +n+","+(this._x1=+o)+","+(this._y1=+s)},arcTo:function(t,e,i,n,o){var s=this._x1,r=this._y1,a=(i=+i)-(t=+t),h=(n=+n)-(e=+e),c=s-t,l=r-e,u=c*c+l*l;if((o=+o)<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(u>Ti)if(Math.abs(l*a-h*c)>Ti&&o){var d=i-s,p=n-r,f=a*a+h*h,g=d*d+p*p,m=Math.sqrt(f),_=Math.sqrt(u),y=o*Math.tan((Mi-Math.acos((f+u-g)/(2*m*_)))/2),v=y/_,b=y/m;Math.abs(v-1)>Ti&&(this._+="L"+(t+v*c)+","+(e+v*l)),this._+="A"+o+","+o+",0,0,"+ +(l*d>c*p)+","+(this._x1=t+b*a)+","+(this._y1=e+b*h)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,i,n,o,s){t=+t,e=+e,s=!!s;var r=(i=+i)*Math.cos(n),a=i*Math.sin(n),h=t+r,c=e+a,l=1^s,u=s?n-o:o-n;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+h+","+c:(Math.abs(this._x1-h)>Ti||Math.abs(this._y1-c)>Ti)&&(this._+="L"+h+","+c),i&&(u<0&&(u=u%ji+ji),u>Di?this._+="A"+i+","+i+",0,1,"+l+","+(t-r)+","+(e-a)+"A"+i+","+i+",0,1,"+l+","+(this._x1=h)+","+(this._y1=c):u>Ti&&(this._+="A"+i+","+i+",0,"+ +(u>=Mi)+","+l+","+(this._x1=t+i*Math.cos(o))+","+(this._y1=e+i*Math.sin(o))))},rect:function(t,e,i,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +i+"v"+ +n+"h"+-i+"Z"},toString:function(){return this._}};var Ii=Li,Hi=function t(e){function i(t,i){return t=null==t?0:+t,i=null==i?1:+i,1===arguments.length?(i=t,t=0):i-=t,function(){return e()*i+t}}return i.source=t,i}(Math.random),Xi=function(t){return"string"==typeof t?new wt([document.querySelectorAll(t)],[document.documentElement]):new wt([null==t?[]:d(t)],bt)};function Fi(t){return((t=Math.exp(t))+1/t)/2}var Vi=function t(e,i,n){function o(t,o){var s,r,a=t[0],h=t[1],c=t[2],l=o[2],u=o[0]-a,d=o[1]-h,p=u*u+d*d;if(p<1e-12)r=Math.log(l/c)/e,s=function(t){return[a+t*u,h+t*d,c*Math.exp(e*t*r)]};else{var f=Math.sqrt(p),g=(l*l-c*c+n*p)/(2*c*i*f),m=(l*l-c*c-n*p)/(2*l*i*f),_=Math.log(Math.sqrt(g*g+1)-g),y=Math.log(Math.sqrt(m*m+1)-m);r=(y-_)/e,s=function(t){var n,o=t*r,s=Fi(_),l=c/(i*f)*(s*(n=e*o+_,((n=Math.exp(2*n))-1)/(n+1))-function(t){return((t=Math.exp(t))-1/t)/2}(_));return[a+l*u,h+l*d,c*s/Fi(e*o+_)]}}return s.duration=1e3*r*e/Math.SQRT2,s}return o.rho=function(e){var i=Math.max(.001,+e),n=i*i;return t(i,n,n*n)},o}(Math.SQRT2,2,4),Yi=t=>()=>t;function Wi(t,{sourceEvent:e,target:i,transform:n,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:o}})}function qi(t,e,i){this.k=t,this.x=e,this.y=i}qi.prototype={constructor:qi,scale:function(t){return 1===t?this:new qi(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new qi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Zi=new qi(1,0,0);function Ui(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Zi;return t.__zoom}function Gi(t){t.stopImmediatePropagation()}Ui.prototype=qi.prototype;var Ki=function(t){t.preventDefault(),t.stopImmediatePropagation()};function Ji(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function $i(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Qi(){return this.__zoom||Zi}function tn(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function en(){return navigator.maxTouchPoints||"ontouchstart"in this}function nn(t,e,i){var n=t.invertX(e[0][0])-i[0][0],o=t.invertX(e[1][0])-i[1][0],s=t.invertY(e[0][1])-i[0][1],r=t.invertY(e[1][1])-i[1][1];return t.translate(o>n?(n+o)/2:Math.min(0,n)||Math.max(0,o),r>s?(s+r)/2:Math.min(0,s)||Math.max(0,r))}class on{static error(t,e){switch(e){case"eval":throw new EvalError(t);case"range":throw new RangeError(t);case"reference":throw new ReferenceError(t);case"syntax":throw new SyntaxError(t);case"type":throw new TypeError(t);case"uri":throw new URIError(t);default:throw new Error(t)}}static info(t){console.log(t)}static debug(t){console.debug(t)}}class sn{static cloneObject(t){return null===t?null:"object"==typeof t?JSON.parse(JSON.stringify(t)):void on.error("Impossible to clone a non-object","type")}static clearObject(t){for(const e in t)delete t[e]}static fromObjectToArray(t){const e=[];for(const i in t)e.push(t[i]);return e}static mergeObjects(t,e,i=!1){if(void 0===e&&this.isPureObjectType(t))return this.cloneObject(t);if(void 0===t&&this.isPureObjectType(e))return this.cloneObject(e);this.isPureObjectType(t)&&this.isPureObjectType(e)||on.error("Only two pure objects can be merged","type");const n=this.cloneObject(t);for(const o in e){const t=e[o];i&&void 0===n[o]||(this.isPrimitiveType(t)||null===t?n[o]=t:Array.isArray(t)?n[o]=sn.cloneObject(t):this.isPureObjectType(t)?n[o]=this.isPureObjectType(n[o])?sn.mergeObjects(n[o],t):sn.cloneObject(t):on.error(`Type "${typeof t}" not allowed here`,"type"))}return n}static cssRules(t){let e="",i=document.styleSheets;for(let n=0;n<i.length;n++){const o=i[n].cssRules;if(o)for(let i=0;i<o.length;i++){const n=o[i],s=n.cssText.match(/^@font-face/);(t.querySelector(n.selectorText)||s)&&(e+=n.cssText)}}return e}static isPrimitiveType(t){return"string"==typeof t||"number"==typeof t||"boolean"==typeof t||void 0===t}static isPureObjectType(t){return"object"==typeof t&&!Array.isArray(t)&&null!==t}static removeAllRanges(){window.getSelection().removeAllRanges()}static focusWithCaretAtEnd(t){const e=document.createRange(),i=window.getSelection();t.focus(),e.selectNodeContents(t),e.collapse(!1),i.removeAllRanges(),i.addRange(e)}}class rn{constructor(){const t=sn.fromObjectToArray(an);this.dispatcher=c(...t)}call(t,e,...i){return this.dispatcher.call(t,e,...i)}on(t,e){"string"!=typeof t&&on.error("The event must be a string","type"),an[t]||on.error("The event does not exist"),this.dispatcher.on(an[t],e)}}var an=function(t){return t.create="mindap-create",t.center="mindap-center",t.undo="mindap-undo",t.redo="mindap-redo",t.exportJSON="mindap-export-json",t.exportImage="mindap-export-image",t.zoom="mindap-zoom",t.zoomIn="mindap-zoom-in",t.zoomOut="mindap-zoom-out",t.nodeSelect="mindap-node-select",t.nodeDeselect="mindap-node-deselect",t.nodeUpdate="mindap-node-update",t.nodeCreate="mindap-node-create",t.nodeRemove="mindap-node-remove",t.nodePayloadSelect="mindap-node-payload-select",t.nodeContentEdit="mindap-node-content-edit",t}({});class hn{constructor(t){this.zoomIn=t=>{t&&"number"!=typeof t&&on.error("The parameter must be a number","type"),this.move(!0,t),this.map.events.call(an.zoomIn)},this.zoomOut=t=>{t&&"number"!=typeof t&&on.error("The parameter must be a number","type"),this.move(!1,t),this.map.events.call(an.zoomOut)},this.center=(t,e=500)=>{t&&"zoom"!==t&&"position"!==t&&on.error('The type must be a string ("zoom" or "position")',"type"),e&&"number"!=typeof e&&on.error("The duration must be a number","type");const i=this.map.nodes.getRoot(),n=this.map.dom.container.node().clientWidth,o=this.map.dom.container.node().clientHeight,s=n/2-i.coordinates.x,r=o/2-i.coordinates.y,a=this.map.dom.svg.transition().duration(e);switch(t){case"zoom":this.zoomBehavior.scaleTo(a,1);break;case"position":this.zoomBehavior.translateTo(a,n/2-s,o/2-r);break;default:this.zoomBehavior.transform(a,Zi.translate(s,r))}this.map.events.call(an.center)},this.map=t,this.zoomBehavior=function(){var t,e,i,n=Ji,o=$i,s=nn,r=tn,a=en,h=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],u=250,d=Vi,p=c("start","zoom","end"),f=500,g=0,m=10;function _(t){t.property("__zoom",Qi).on("wheel.zoom",O).on("mousedown.zoom",N).on("dblclick.zoom",k).filter(a).on("touchstart.zoom",C).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(t,e){return(e=Math.max(h[0],Math.min(h[1],e)))===t.k?t:new qi(e,t.x,t.y)}function v(t,e,i){var n=e[0]-i[0]*t.k,o=e[1]-i[1]*t.k;return n===t.x&&o===t.y?t:new qi(t.k,n,o)}function b(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function w(t,e,i,n){t.on("start.zoom",function(){x(this,arguments).event(n).start()}).on("interrupt.zoom end.zoom",function(){x(this,arguments).event(n).end()}).tween("zoom",function(){var t=this,s=arguments,r=x(t,s).event(n),a=o.apply(t,s),h=null==i?b(a):"function"==typeof i?i.apply(t,s):i,c=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),l=t.__zoom,u="function"==typeof e?e.apply(t,s):e,p=d(l.invert(h).concat(c/l.k),u.invert(h).concat(c/u.k));return function(t){if(1===t)t=u;else{var e=p(t),i=c/e[2];t=new qi(i,h[0]-e[0]*i,h[1]-e[1]*i)}r.zoom(null,t)}})}function x(t,e,i){return!i&&t.__zooming||new S(t,e)}function S(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=o.apply(t,e),this.taps=0}function O(t,...e){if(n.apply(this,arguments)){var i=x(this,e).event(t),o=this.__zoom,a=Math.max(h[0],Math.min(h[1],o.k*Math.pow(2,r.apply(this,arguments)))),c=_e(t);if(i.wheel)i.mouse[0][0]===c[0]&&i.mouse[0][1]===c[1]||(i.mouse[1]=o.invert(i.mouse[0]=c)),clearTimeout(i.wheel);else{if(o.k===a)return;i.mouse=[c,o.invert(c)],Xe(this),i.start()}Ki(t),i.wheel=setTimeout(u,150),i.zoom("mouse",s(v(y(o,a),i.mouse[0],i.mouse[1]),i.extent,l))}function u(){i.wheel=null,i.end()}}function N(t,...e){if(!i&&n.apply(this,arguments)){var o=x(this,e,!0).event(t),r=Ot(t.view).on("mousemove.zoom",d,!0).on("mouseup.zoom",p,!0),a=_e(t,h),h=t.currentTarget,c=t.clientX,u=t.clientY;Ct(t.view),Gi(t),o.mouse=[a,this.__zoom.invert(a)],Xe(this),o.start()}function d(t){if(Ki(t),!o.moved){var e=t.clientX-c,i=t.clientY-u;o.moved=e*e+i*i>g}o.event(t).zoom("mouse",s(v(o.that.__zoom,o.mouse[0]=_e(t,h),o.mouse[1]),o.extent,l))}function p(t){r.on("mousemove.zoom mouseup.zoom",null),Rt(t.view,o.moved),Ki(t),o.event(t).end()}}function k(t,...e){if(n.apply(this,arguments)){var i=this.__zoom,r=_e(t.changedTouches?t.changedTouches[0]:t,this),a=i.invert(r),h=s(v(y(i,i.k*(t.shiftKey?.5:2)),r,a),o.apply(this,e),l);Ki(t),u>0?Ot(this).transition().duration(u).call(w,h,r,t):Ot(this).call(_.transform,h,r,t)}}function C(i,...o){if(n.apply(this,arguments)){var s,r,a,h,c=i.touches,l=c.length,u=x(this,o,i.changedTouches.length===l).event(i);for(Gi(i),r=0;r<l;++r)h=[h=_e(a=c[r],this),this.__zoom.invert(h),a.identifier],u.touch0?u.touch1||u.touch0[2]===h[2]||(u.touch1=h,u.taps=0):(u.touch0=h,s=!0,u.taps=1+!!t);t&&(t=clearTimeout(t)),s&&(u.taps<2&&(e=h[0],t=setTimeout(function(){t=null},f)),Xe(this),u.start())}}function R(t,...e){if(this.__zooming){var i,n,o,r,a=x(this,e).event(t),h=t.changedTouches,c=h.length;for(Ki(t),i=0;i<c;++i)o=_e(n=h[i],this),a.touch0&&a.touch0[2]===n.identifier?a.touch0[0]=o:a.touch1&&a.touch1[2]===n.identifier&&(a.touch1[0]=o);if(n=a.that.__zoom,a.touch1){var u=a.touch0[0],d=a.touch0[1],p=a.touch1[0],f=a.touch1[1],g=(g=p[0]-u[0])*g+(g=p[1]-u[1])*g,m=(m=f[0]-d[0])*m+(m=f[1]-d[1])*m;n=y(n,Math.sqrt(g/m)),o=[(u[0]+p[0])/2,(u[1]+p[1])/2],r=[(d[0]+f[0])/2,(d[1]+f[1])/2]}else{if(!a.touch0)return;o=a.touch0[0],r=a.touch0[1]}a.zoom("touch",s(v(n,o,r),a.extent,l))}}function P(t,...n){if(this.__zooming){var o,s,r=x(this,n).event(t),a=t.changedTouches,h=a.length;for(Gi(t),i&&clearTimeout(i),i=setTimeout(function(){i=null},f),o=0;o<h;++o)s=a[o],r.touch0&&r.touch0[2]===s.identifier?delete r.touch0:r.touch1&&r.touch1[2]===s.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),2===r.taps&&(s=_e(s,this),Math.hypot(e[0]-s[0],e[1]-s[1])<m)){var c=Ot(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return _.transform=function(t,e,i,n){var o=t.selection?t.selection():t;o.property("__zoom",Qi),t!==o?w(t,e,i,n):o.interrupt().each(function(){x(this,arguments).event(n).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},_.scaleBy=function(t,e,i,n){_.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)},i,n)},_.scaleTo=function(t,e,i,n){_.transform(t,function(){var t=o.apply(this,arguments),n=this.__zoom,r=null==i?b(t):"function"==typeof i?i.apply(this,arguments):i,a=n.invert(r),h="function"==typeof e?e.apply(this,arguments):e;return s(v(y(n,h),r,a),t,l)},i,n)},_.translateBy=function(t,e,i,n){_.transform(t,function(){return s(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof i?i.apply(this,arguments):i),o.apply(this,arguments),l)},null,n)},_.translateTo=function(t,e,i,n,r){_.transform(t,function(){var t=o.apply(this,arguments),r=this.__zoom,a=null==n?b(t):"function"==typeof n?n.apply(this,arguments):n;return s(Zi.translate(a[0],a[1]).scale(r.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof i?-i.apply(this,arguments):-i),t,l)},n,r)},S.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=Ot(this.that).datum();p.call(t,this.that,new Wi(t,{sourceEvent:this.sourceEvent,target:_,type:t,transform:this.that.__zoom,dispatch:p}),e)}},_.wheelDelta=function(t){return arguments.length?(r="function"==typeof t?t:Yi(+t),_):r},_.filter=function(t){return arguments.length?(n="function"==typeof t?t:Yi(!!t),_):n},_.touchable=function(t){return arguments.length?(a="function"==typeof t?t:Yi(!!t),_):a},_.extent=function(t){return arguments.length?(o="function"==typeof t?t:Yi([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),_):o},_.scaleExtent=function(t){return arguments.length?(h[0]=+t[0],h[1]=+t[1],_):[h[0],h[1]]},_.translateExtent=function(t){return arguments.length?(l[0][0]=+t[0][0],l[1][0]=+t[1][0],l[0][1]=+t[0][1],l[1][1]=+t[1][1],_):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},_.constrain=function(t){return arguments.length?(s=t,_):s},_.duration=function(t){return arguments.length?(u=+t,_):u},_.interpolate=function(t){return arguments.length?(d=t,_):d},_.on=function(){var t=p.on.apply(p,arguments);return t===p?_:t},_.clickDistance=function(t){return arguments.length?(g=(t=+t)*t,_):Math.sqrt(g)},_.tapDistance=function(t){return arguments.length?(m=+t,_):m},_}().scaleExtent([1/8,2]).on("zoom",t=>{this.map.dom.g.attr("transform",t.transform),this.map.events.call(an.zoom)})}centerRootGroup(){var t,e,i,n;null===(e=null===(t=this.map.dom.svg)||void 0===t?void 0:t.node())||void 0===e||e.getBBox(),null===(n=null===(i=this.map.dom.g)||void 0===i?void 0:i.node())||void 0===n||n.getBBox()}getZoomBehavior(){return this.zoomBehavior}move(t,e=50){const i=this.map.dom.svg.transition().duration(e);this.zoomBehavior.scaleBy(i,t?4/3:3/4)}}class cn{constructor(t){this.map=t}create(){this.map.dom.container=Ot("#"+this.map.id),this.map.dom.svg=this.map.dom.container.append("svg").style("width","100%").style("height","100%").style("top",0).style("left",0),this.map.dom.svg.append("rect").attr("width","100%").attr("height","100%").attr("fill","white").attr("pointer-events","all").on("click",()=>{this.map.nodes.deselectNode()}),this.map.dom.g=this.map.dom.svg.append("g")}update(){const t=this.map.nodes.getNodes(),e={nodes:this.map.dom.g.selectAll("."+this.map.id+"_node").data(t),branches:this.map.dom.g.selectAll("."+this.map.id+"_branch").data(t.slice(1))};let i=!1;const n=e.nodes.enter().append("g").style("cursor","pointer").attr("class",this.map.id+"_node").attr("id",function(t){return t.dom=this,t.id}).attr("transform",t=>"translate("+t.coordinates.x+","+t.coordinates.y+")").on("dblclick",(t,e)=>{this.enableNodeNameEditing(e)}).on("click",(t,e)=>{this.map.nodes.selectNode(e.id)}).on("touchstart",(t,e)=>{if(!i)return i=!0,setTimeout(function(){i=!1},300),!1;this.enableNodeNameEditing(e)});!0===this.map.options.drag?n.call(this.map.drag.getDragBehavior()):n.on("mousedown",(t,e)=>{this.map.nodes.selectNode(e.id)}),n.insert("foreignObject").html(t=>this.createNodeNameDOM(t)).each(t=>{this.updateNodeNameContainer(t)}),n.insert("path","foreignObject").style("fill","white").style("stroke-width",1).style("stroke","rgb(87, 122, 150)").attr("d",t=>this.drawNodeBackground(t)).on("contextmenu",(t,e)=>{t.preventDefault(),this.map.events.call(an.nodeContentEdit,void 0,e)}),n.each(t=>{this.setImage(t),this.setPayloadFlag(t)}),e.branches.enter().insert("path","g").style("fill","none").style("stroke",t=>t.colors.branch).attr("class",this.map.id+"_branch").attr("id",t=>t.id+"_branch").attr("d",t=>this.drawBranch(t)),e.nodes.exit().remove(),e.branches.exit().remove()}clear(){Xi("."+this.map.id+"_node, ."+this.map.id+"_branch").remove()}drawNodeBackground(t){const e=t.getNameDOM(),i=Ii();t.dimensions.width=e.clientWidth+24,t.dimensions.height=e.clientHeight+5;const n=t.dimensions.width/2,o=t.dimensions.height/2;return i.moveTo(-n,0),i.arcTo(-n,-o,4-n,-o,4),i.arcTo(n,-o,n,4-o,4),i.arcTo(n,o,n-4,o,4),i.arcTo(-n,o,-n,o-4,4),i.closePath(),i}drawBranch(t){const e=t.parent,i=Ii();return t.getLevel(),i.moveTo(e.coordinates.x,e.coordinates.y),i.lineTo(t.coordinates.x,t.coordinates.y),i}updateNodeShapes(t){const e=t.getBackgroundDOM();Ot(e).attr("d",t=>this.drawNodeBackground(t)),Xi("."+this.map.id+"_branch").attr("d",t=>this.drawBranch(t)),this.updateImagePosition(t),this.updateNodeNameContainer(t)}setImage(t){let e=t.getImageDOM();if(e||(e=document.createElementNS("http://www.w3.org/2000/svg","image"),t.dom.appendChild(e)),""!==t.image.src){const i=new Image;i.src=t.image.src,i.onload=function(){const i=t.image.size,n=this.width*i/this.height,o=-(i+t.dimensions.height/2+5),s=-n/2;e.setAttribute("href",t.image.src),e.setAttribute("height",i.toString()),e.setAttribute("width",n.toString()),e.setAttribute("y",o.toString()),e.setAttribute("x",s.toString())},i.onerror=function(){e.remove(),t.image.src=""}}else e.remove()}setPayloadFlag(t){if(!t.payload)return;const{width:e,height:i}=t.dimensions,n=-e/2+4+4,o=i/2-4-4;Ot(t.dom).append("circle").style("fill","darkseagreen").attr("cx",n).attr("cy",o).attr("r",4).on("click",()=>{this.map.events.call(an.nodePayloadSelect,void 0,t.dom,t.payload)})}updateImagePosition(t){if(""!==t.image.src){const e=t.getImageDOM(),i=-(e.getBBox().height+t.dimensions.height/2+5);e.setAttribute("y",i.toString())}}enableNodeNameEditing(t){if(this.map.options.readonly)return;const e=t.getNameDOM();sn.focusWithCaretAtEnd(e),e.style.setProperty("cursor","auto"),e.ondblclick=e.onmousedown=t=>{t.stopPropagation()},e.oninput=()=>{this.updateNodeShapes(t)},e.onkeydown=t=>{if("Escape"===t.code&&(sn.removeAllRanges(),e.blur()),t.ctrlKey||t.metaKey)switch(t.code){case"KeyA":case"KeyC":case"KeyV":case"KeyX":case"KeyZ":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":case"Backspace":case"Delete":return!0;default:return!1}switch(t.code){case"Tab":return!1;default:return!0}},e.onpaste=t=>{t.preventDefault();const e=t.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,e)},e.onblur=()=>{e.innerHTML="<br>"===e.innerHTML?"":e.innerHTML,e.innerHTML!==t.name&&this.map.nodes.updateNode("name",e.innerHTML),e.ondblclick=e.onmousedown=e.onblur=e.onkeydown=e.oninput=e.onpaste=null,e.style.setProperty("cursor","pointer"),e.blur()}}updateNodeNameContainer(t){const e=t.getNameDOM(),i=e.parentNode;0!==e.offsetWidth&&(i.setAttribute("x",(-e.clientWidth/2).toString()),i.setAttribute("y",(-e.clientHeight/2).toString()),i.setAttribute("width",e.clientWidth.toString()),i.setAttribute("height",e.clientHeight.toString()))}createNodeNameDOM(t){const e=document.createElement("div");return e.style.setProperty("font-size",t.font.size.toString()+"px"),e.style.setProperty("color",t.colors.name),e.style.setProperty("font-style",t.font.style),e.style.setProperty("font-weight",t.font.weight),e.style.setProperty("text-decoration",t.font.decoration),e.style.setProperty("outline","none"),e.style.setProperty("display","inline-block"),e.style.setProperty("white-space","pre"),e.style.setProperty("font-family",this.map.options.fontFamily),e.style.setProperty("text-align","center"),e.style.setProperty("vertical-align","text-top"),e.style.setProperty("line-height","16px"),this.map.options.readonly||e.setAttribute("contenteditable","true"),e.innerHTML=t.name,e.outerHTML}}class ln{constructor(t={},e){var i,n,o;this._readonly=!1,this.drag=!0,this.zoom=!0,this._map=e,this.fontFamily=t.fontFamily||"Arial, Helvetica, sans-serif",this.centerOnResize=void 0===t.centerOnResize||t.centerOnResize,this.drag=null===(i=t.drag)||void 0===i||i,this.zoom=null===(n=t.zoom)||void 0===n||n,this.readonly=null!==(o=t.readonly)&&void 0!==o&&o,this.defaultNode=sn.mergeObjects({name:"Node",image:{src:"",size:60},colors:{name:"#787878",background:"#f9f9f9",branch:"#577a96"},font:{size:14,style:"normal",weight:"normal"},locked:!0},t.defaultNode,!0),this.rootNode=sn.mergeObjects({name:"Root node",image:{src:"",size:70},colors:{name:"#787878",background:"aliceblue",branch:""},font:{size:16,style:"normal",weight:"bold"}},t.rootNode,!0)}set readonly(t){this._readonly=t,this._readonly&&(this.drag=!1)}get readonly(){return this._readonly}update(t,e){switch("string"!=typeof t&&on.error("The property must be a string","type"),t){case"fontFamily":this.updateFontFamily(e);break;case"centerOnResize":this.updateCenterOnResize(e);break;case"drag":this.updateDrag(e);break;case"zoom":this.updateZoom(e);break;case"defaultNode":this.updateDefaultNode(e);break;case"rootNode":this.updateDefaultRootNode(e);break;default:on.error("The property does not exist")}}updateFontFamily(t){"string"!=typeof t&&on.error("The font must be a string","type"),this.fontFamily=t,this._map.draw.update()}updateCenterOnResize(t){"boolean"!=typeof t&&on.error("The value must be a boolean","type"),this.centerOnResize=t,!0===this.centerOnResize?Ot(window).on("resize."+this._map.id,()=>{this._map.zoom.center()}):Ot(window).on("resize."+this._map.id,null)}updateDrag(t){"boolean"!=typeof t&&on.error("The value must be a boolean","type"),this.drag=t,this._map.draw.clear(),this._map.draw.update()}updateZoom(t){"boolean"!=typeof t&&on.error("The value must be a boolean","type"),this.zoom=t,!0===this.zoom?this._map.dom.svg.call(this._map.zoom.getZoomBehavior()):this._map.dom.svg.on(".zoom",null)}updateDefaultNode(t){this.defaultNode=sn.mergeObjects(this.defaultNode,t,!0)}updateDefaultRootNode(t){this.rootNode=sn.mergeObjects(this.rootNode,t,!0)}}class un{constructor(t){this.id=t.id,this.parent=t.parent,this.name=t.name,this.coordinates=t.coordinates,this.colors=t.colors,this.image=t.image,this.font=t.font,this.locked=t.locked,this.payload=t.payload,this.dimensions={width:0,height:0},this.k=t.k||Hi(-20,20)()}isRoot(){const t=this.id.split("_");return"0"===t[t.length-1]}getLevel(){let t=1,e=this.parent;for(;e;)t++,e=e.parent;return t}getNameDOM(){return this.dom.querySelector("foreignObject > div")}getBackgroundDOM(){return this.dom.querySelector("path")}getImageDOM(){return this.dom.querySelector("image")}}class dn{constructor(t){this.current=()=>this.snapshots[this.index],this.map=t,this.index=-1,this.snapshots=[]}new(t){if(void 0===t){const t=sn.cloneObject(this.map.nodes.getRoot().coordinates);this.map.nodes.setCounter(0),this.map.nodes.clear(),this.map.draw.clear(),this.map.draw.update(),this.map.nodes.addRootNode(t),this.map.zoom.center(null,0),this.save(),this.map.events.call(an.create)}else this.checkSnapshotStructure(t)?(this.redraw(t),this.map.zoom.center("position",0),this.save(),this.map.events.call(an.create)):on.error("The snapshot is not correct")}undo(){this.index>0&&(this.redraw(this.snapshots[--this.index]),this.map.events.call(an.undo))}redo(){this.index<this.snapshots.length-1&&(this.redraw(this.snapshots[++this.index]),this.map.events.call(an.redo))}save(){this.index<this.snapshots.length-1&&this.snapshots.splice(this.index+1),this.snapshots.push(this.getSnapshot()),this.index++}getHistory(){return{snapshots:this.snapshots.slice(0),index:this.index}}redraw(t){this.map.nodes.clear(),t.forEach(t=>{const e={id:this.sanitizeNodeId(t.id),parent:this.map.nodes.getNode(this.sanitizeNodeId(t.parent)),k:t.k,name:t.name,coordinates:sn.cloneObject(t.coordinates),image:sn.cloneObject(t.image),colors:sn.cloneObject(t.colors),font:sn.cloneObject(t.font),locked:t.locked};t.payload&&(e.payload=sn.cloneObject(t.payload));const i=new un(e);this.map.nodes.setNode(i.id,i)}),this.map.draw.clear(),this.map.draw.update(),this.map.nodes.selectRootNode(),this.setCounter()}getSnapshot(){return this.map.nodes.getNodes().map(t=>this.map.nodes.getNodeProperties(t,!1)).slice()}setCounter(){const t=this.map.nodes.getNodes().map(t=>{const e=t.id.split("_");return parseInt(e[e.length-1])});this.map.nodes.setCounter(Math.max(...t)+1)}sanitizeNodeId(t){if("string"==typeof t){const e=t.split("_");return this.map.id+"_"+e[e.length-2]+"_"+e[e.length-1]}}checkSnapshotStructure(t){if(!Array.isArray(t))return!1;t[0].key&&t[0].value&&this.convertOldMmp(t);for(const e of t)if(!this.checkNodeProperties(e))return!1;return this.translateNodePositions(t),!0}checkNodeProperties(t){return["string"==typeof t.id,"string"==typeof t.parent,"number"==typeof t.k,"string"==typeof t.name,"boolean"==typeof t.locked,t.coordinates&&"number"==typeof t.coordinates.x&&"number"==typeof t.coordinates.y,t.image&&"number"==typeof t.image.size&&"string"==typeof t.image.src,t.colors&&"string"==typeof t.colors.background&&"string"==typeof t.colors.branch&&"string"==typeof t.colors.name,t.font&&"number"==typeof t.font.size&&"string"==typeof t.font.weight&&"string"==typeof t.font.style].every(t=>t)}convertOldMmp(t){for(const e of t){const t=sn.cloneObject(e);sn.clearObject(e),e.id="map_node_"+t.key.substr(4),e.parent=t.value.parent?"map_node_"+t.value.parent.substr(4):"",e.k=t.value.k,e.name=t.value.name,e.locked=t.value.fixed,e.coordinates={x:t.value.x,y:t.value.y},e.image={size:parseInt(t.value["image-size"]),src:t.value["image-src"]},e.colors={background:t.value["background-color"],branch:t.value["branch-color"]||"",name:t.value["text-color"]},e.font={size:parseInt(t.value["font-size"]),weight:t.value.bold?"bold":"normal",style:t.value.italic?"italic":"normal"}}}translateNodePositions(t){const e=this.map.nodes.getRoot(),i=t.find(t=>{const e=t.id.split("_");return"0"===e[e.length-1]}),n=i.coordinates.x-e.coordinates.x,o=i.coordinates.y-e.coordinates.y;for(const s of t)s.coordinates.x-=n,s.coordinates.y-=o}}class pn{constructor(t){this.map=t,t.options.readonly||(this.dragBehavior=function(){var t,e,i,n,o=Pi,s=Ei,r=Ai,a=zi,h={},l=c("start","drag","end"),u=0,d=0;function p(t){t.on("mousedown.drag",f).filter(a).on("touchstart.drag",_).on("touchmove.drag",y).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(r,a){if(!n&&o.call(this,r,a)){var h=b(this,s.call(this,r,a),r,a,"mouse");h&&(Ot(r.view).on("mousemove.drag",g,!0).on("mouseup.drag",m,!0),Ct(r.view),Nt(r),i=!1,t=r.clientX,e=r.clientY,h("start",r))}}function g(n){if(kt(n),!i){var o=n.clientX-t,s=n.clientY-e;i=o*o+s*s>d}h.mouse("drag",n)}function m(t){Ot(t.view).on("mousemove.drag mouseup.drag",null),Rt(t.view,i),kt(t),h.mouse("end",t)}function _(t,e){if(o.call(this,t,e)){var i,n,r=t.changedTouches,a=s.call(this,t,e),h=r.length;for(i=0;i<h;++i)(n=b(this,a,t,e,r[i].identifier,r[i]))&&(Nt(t),n("start",t,r[i]))}}function y(t){var e,i,n=t.changedTouches,o=n.length;for(e=0;e<o;++e)(i=h[n[e].identifier])&&(kt(t),i("drag",t,n[e]))}function v(t){var e,i,o=t.changedTouches,s=o.length;for(n&&clearTimeout(n),n=setTimeout(function(){n=null},500),e=0;e<s;++e)(i=h[o[e].identifier])&&(Nt(t),i("end",t,o[e]))}function b(t,e,i,n,o,s){var a,c,d,f=l.copy(),g=_e(s||i,e);if(null!=(d=r.call(t,new Ri("beforestart",{sourceEvent:i,target:p,identifier:o,active:u,x:g[0],y:g[1],dx:0,dy:0,dispatch:f}),n)))return a=d.x-g[0]||0,c=d.y-g[1]||0,function i(s,r,l){var m,_=g;switch(s){case"start":h[o]=i,m=u++;break;case"end":delete h[o],--u;case"drag":g=_e(l||r,e),m=u}f.call(s,t,new Ri(s,{sourceEvent:r,subject:d,target:p,identifier:o,active:m,x:g[0]+a,y:g[1]+c,dx:g[0]-_[0],dy:g[1]-_[1],dispatch:f}),n)}}return p.filter=function(t){return arguments.length?(o="function"==typeof t?t:Ci(!!t),p):o},p.container=function(t){return arguments.length?(s="function"==typeof t?t:Ci(t),p):s},p.subject=function(t){return arguments.length?(r="function"==typeof t?t:Ci(t),p):r},p.touchable=function(t){return arguments.length?(a="function"==typeof t?t:Ci(!!t),p):a},p.on=function(){var t=l.on.apply(l,arguments);return t===l?p:t},p.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,p):Math.sqrt(d)},p}().on("start",(t,e)=>this.started(e,t)).on("drag",(t,e)=>this.dragged(e,t)).on("end",(t,e)=>this.ended(e)))}getDragBehavior(){return this.dragBehavior}started(t,e){e.sourceEvent.preventDefault(),this.orientation=this.map.nodes.getOrientation(t),this.descendants=this.map.nodes.getDescendants(t),this.map.nodes.selectNode(t.id)}dragged(t,e){const i=e.dy,n=e.dx,o=t.coordinates.x+=n,s=t.coordinates.y+=i;if(t.dom.setAttribute("transform","translate("+[o,s]+")"),t.locked){const e=this.map.nodes.getOrientation(t),o=e!==this.orientation,s=t;for(const t of this.descendants){let e=t.coordinates.x+=n,r=t.coordinates.y+=i;o&&(e=t.coordinates.x+=2*(s.coordinates.x-t.coordinates.x)),t.dom.setAttribute("transform","translate("+[e,r]+")")}o&&(this.orientation=e)}Xi("."+this.map.id+"_branch").attr("d",t=>this.map.draw.drawBranch(t)),this.dragging=!0}ended(t){this.dragging&&(this.dragging=!1,this.map.history.save(),this.map.events.call(an.nodeUpdate,t.dom,this.map.nodes.getNodeProperties(t)))}}class fn{constructor(t){this.updateNodeName=(t,e,i=!1)=>{if(e&&"string"!=typeof e&&on.error("The name must be a string","type"),t.name==e&&!i)return!1;t.getNameDOM().innerHTML=e,this.map.draw.updateNodeShapes(t),!1===i&&(t.name=e)},this.updateNodeCoordinates=(t,e)=>{const i=this.fixCoordinates(e);if((e=sn.mergeObjects(t.coordinates,i,!0)).x===t.coordinates.x&&e.y===t.coordinates.y)return!1;{const i=this.getOrientation(this.selectedNode),n=t.coordinates.x-e.x,o=t.coordinates.y-e.y;if(t.coordinates=sn.cloneObject(e),t.dom.setAttribute("transform","translate("+[e.x,e.y]+")"),this.selectedNode.locked){const t=this.selectedNode,e=this.getDescendants(this.selectedNode),s=this.getOrientation(this.selectedNode);for(const r of e){let e=r.coordinates.x-=n,a=r.coordinates.y-=o;i!==s&&(e=r.coordinates.x+=2*(t.coordinates.x-r.coordinates.x)),r.dom.setAttribute("transform","translate("+[e,a]+")")}}Xi("."+this.map.id+"_branch").attr("d",t=>this.map.draw.drawBranch(t))}},this.updateNodeBackgroundColor=(t,e,i=!1)=>{if(e&&"string"!=typeof e&&on.error("The background color must be a string","type"),t.colors.background===e&&!i)return!1;{const n=t.getBackgroundDOM();n.style.fill=e,""!==n.style.stroke&&(n.style.stroke=Zt(e).darker(.5).toString()),!1===i&&(t.colors.background=e)}},this.updateNodeNameColor=(t,e,i=!1)=>{if(e&&"string"!=typeof e&&on.error("The text color must be a string","type"),t.colors.name===e&&!i)return!1;t.getNameDOM().style.color=e,!1===i&&(t.colors.name=e)},this.updateNodeBranchColor=(t,e,i=!1)=>{if(e&&"string"!=typeof e&&on.error("The branch color must be a string","type"),t.isRoot())on.error("The root node has no branches");else{if(t.colors.name===e&&!i)return!1;{const n=document.getElementById(t.id+"_branch");n.style.fill=n.style.stroke=e,!1===i&&(t.colors.branch=e)}}},this.updateNodeFontSize=(t,e,i=!1)=>{if(e&&"number"!=typeof e&&on.error("The font size must be a number","type"),t.font.size==e&&!i)return!1;t.getNameDOM().style["font-size"]=e+"px",this.map.draw.updateNodeShapes(t),!1===i&&(t.font.size=e)},this.updateNodeImageSize=(t,e,i=!1)=>{if(e&&"number"!=typeof e&&on.error("The image size must be a number","type"),""!==t.image.src){if(t.image.size===e&&!i)return!1;{const n=t.getImageDOM(),o=n.getBBox(),s=e,r=o.width*s/o.height,a=-(s+t.dimensions.height/2+5),h=-r/2;n.setAttribute("height",s.toString()),n.setAttribute("width",r.toString()),n.setAttribute("y",a.toString()),n.setAttribute("x",h.toString()),!1===i&&(t.image.size=s)}}else on.error("The node does not have an image")},this.updateNodeImageSrc=(t,e)=>{if(e&&"string"!=typeof e&&on.error("The image path must be a string","type"),t.image.src===e)return!1;t.image.src=e,this.map.draw.setImage(t)},this.updateNodeFontStyle=(t,e,i=!1)=>{if(e&&"string"!=typeof e&&on.error("The font style must be a string","type"),t.font.style===e)return!1;t.getNameDOM().style["font-style"]=e,!1===i&&(t.font.style=e)},this.updateNodeFontWeight=(t,e,i=!1)=>{if(e&&"string"!=typeof e&&on.error("The font weight must be a string","type"),t.font.weight===e)return!1;t.getNameDOM().style["font-weight"]=e,this.map.draw.updateNodeShapes(t),!1===i&&(t.font.weight=e)},this.updateNodeTextDecoration=(t,e,i=!1)=>{if(e&&"string"!=typeof e&&on.error("The text decoration must be a string","type"),t.font.decoration===e)return!1;t.getNameDOM().style["text-decoration"]=e,this.map.draw.updateNodeShapes(t),!1===i&&(t.font.decoration=e)},this.updateNodeLockedStatus=(t,e)=>{e&&"boolean"!=typeof e&&on.error("The node locked status must be a boolean","type"),t.isRoot()?on.error("The root node can not be locked"):t.locked=e||!t.locked},this.map=t,this.counter=0,this.nodes=new Map}addRootNode(t){const e=sn.mergeObjects(this.map.options.rootNode,{coordinates:{x:this.map.dom.container.node().clientWidth/2,y:this.map.dom.container.node().clientHeight/2},locked:!1,id:this.map.id+"_node_"+this.counter,parent:null}),i=new un(e);t&&(i.coordinates.x=t.x||i.coordinates.x,i.coordinates.y=t.y||i.coordinates.y),this.nodes.set(e.id,i),this.counter++,this.map.draw.update(),this.selectRootNode()}addNode(t,e){e&&"string"!=typeof e&&on.error("The node id must be a string","type");const i=e?this.getNode(e):this.selectedNode;void 0===i&&on.error('There are no nodes with id "'+e+'"');const n=sn.mergeObjects(this.map.options.defaultNode,t,!0);n.id=this.map.id+"_node_"+this.counter,n.parent=i;const o=new un(n);if(this.nodes.set(n.id,o),this.counter++,o.coordinates=this.calculateCoordinates(o),t&&t.coordinates){const e=this.fixCoordinates(t.coordinates);o.coordinates=sn.mergeObjects(o.coordinates,e,!0)}this.map.draw.update(),this.map.history.save(),this.map.events.call(an.nodeCreate,o.dom,this.getNodeProperties(o))}selectNode(t){if(void 0!==t&&("string"!=typeof t&&on.error("The node id must be a string","type"),!this.nodeSelectionTo(t)))if(this.nodes.has(t)){const e=this.nodes.get(t),i=e.getBackgroundDOM();this.selectedNode!==e&&(this.selectedNode&&(this.selectedNode.getBackgroundDOM().style.fill="white"),i.style.fill="aliceblue",sn.removeAllRanges(),this.selectedNode.getNameDOM().blur(),this.selectedNode=e,this.map.events.call(an.nodeSelect,e.dom,this.getNodeProperties(e)))}else on.error("The node id or the direction is not correct");return this.getNodeProperties(this.selectedNode)}editNode(){this.selectedNode&&this.map.draw.enableNodeNameEditing(this.selectedNode)}deselectNode(){this.selectedNode&&(this.selectedNode.getBackgroundDOM().style.fill="white",sn.removeAllRanges()),this.selectRootNode(),this.map.events.call(an.nodeDeselect)}updateNode(t,e,i=!1,n){let o;switch(n&&"string"!=typeof n&&on.error("The node id must be a string","type"),void 0===(n?this.getNode(n):this.selectedNode)&&on.error('There are no nodes with id "'+n+'"'),"string"!=typeof t&&on.error("The property must be a string","type"),t){case"name":o=this.updateNodeName(this.selectedNode,e,i);break;case"locked":o=this.updateNodeLockedStatus(this.selectedNode,e);break;case"coordinates":o=this.updateNodeCoordinates(this.selectedNode,e);break;case"imageSrc":o=this.updateNodeImageSrc(this.selectedNode,e);break;case"imageSize":o=this.updateNodeImageSize(this.selectedNode,e,i);break;case"backgroundColor":o=this.updateNodeBackgroundColor(this.selectedNode,e,i);break;case"branchColor":o=this.updateNodeBranchColor(this.selectedNode,e,i);break;case"fontWeight":o=this.updateNodeFontWeight(this.selectedNode,e,i);break;case"textDecoration":o=this.updateNodeTextDecoration(this.selectedNode,e,i);break;case"fontStyle":o=this.updateNodeFontStyle(this.selectedNode,e,i);break;case"fontSize":o=this.updateNodeFontSize(this.selectedNode,e,i);break;case"nameColor":o=this.updateNodeNameColor(this.selectedNode,e,i);break;default:on.error("The property does not exist")}!1===i&&!1!==o&&(this.map.history.save(),this.map.events.call(an.nodeUpdate,this.selectedNode.dom,this.getNodeProperties(this.selectedNode)))}removeNode(t){t&&"string"!=typeof t&&on.error("The node id must be a string","type");const e=t?this.getNode(t):this.selectedNode;void 0===e&&on.error('There are no nodes with id "'+t+'"'),e.isRoot()?on.error("The root node can not be deleted"):(this.nodes.delete(e.id),this.getDescendants(e).forEach(t=>{this.nodes.delete(t.id)}),this.map.draw.clear(),this.map.draw.update(),this.map.history.save(),this.map.events.call(an.nodeRemove,null,this.getNodeProperties(e)),this.deselectNode())}nodeChildren(t){t&&"string"!=typeof t&&on.error("The node id must be a string","type");const e=t?this.getNode(t):this.selectedNode;return void 0===e&&on.error('There are no nodes with id "'+t+'"'),Array.from(this.nodes.values()).filter(t=>t.parent&&t.parent.id===e.id).map(t=>this.getNodeProperties(t))}getNodeProperties(t,e=!0){return{id:t.id,parent:t.parent?t.parent.id:"",name:t.name,coordinates:e?this.fixCoordinates(t.coordinates,!0):sn.cloneObject(t.coordinates),image:sn.cloneObject(t.image),colors:sn.cloneObject(t.colors),font:sn.cloneObject(t.font),locked:t.locked,k:t.k,payload:sn.cloneObject(t.payload||{})}}fixCoordinates(t,e=!1){const i=Ui(this.map.dom.svg.node()),n={};return t.x&&(n.x=!1===e?(t.x-i.x)/i.k:t.x*i.k+i.x),t.y&&(n.y=!1===e?(t.y-i.y)/i.k:t.y*i.k+i.y),n}nodeSelectionTo(t){switch(t){case"up":return this.moveSelectionOnLevel(!0),!0;case"down":return this.moveSelectionOnLevel(!1),!0;case"left":return this.moveSelectionOnBranch(!0),!0;case"right":return this.moveSelectionOnBranch(!1),!0;default:return!1}}getChildren(t){return Array.from(this.nodes.values()).filter(e=>e.parent&&e.parent.id===t.id)}getOrientation(t){if(!t.isRoot())return t.coordinates.x<this.getRoot().coordinates.x}getRoot(){return this.nodes.get(this.map.id+"_node_0")}getDescendants(t){let e=[];return this.getChildren(t).forEach(t=>{e.push(t),e=e.concat(this.getDescendants(t))}),e}getNodes(){return Array.from(this.nodes.values())}getNode(t){return this.nodes.get(t)}setNode(t,e){this.nodes.set(t,e)}getCounter(){return this.counter}setCounter(t){this.counter=t}getSelectedNode(){return this.selectedNode}selectRootNode(){this.selectedNode=this.nodes.get(this.map.id+"_node_0"),this.selectedNode.getBackgroundDOM().style.fill="aliceblue"}clear(){this.nodes.clear()}getSiblings(t){if(t.isRoot())return[];{const e=this.getChildren(t.parent);return e.length>1?(e.splice(e.indexOf(t),1),e):[]}}calculateCoordinates(t){let e={x:t.parent.coordinates.x,y:t.parent.coordinates.y},i=this.getSiblings(t);if(t.parent.isRoot()){const t=[],n=[];for(const e of i)this.getOrientation(e)?n.push(e):t.push(e);n.length<=t.length?(e.x-=200,i=n):(e.x+=200,i=t)}else this.getOrientation(t.parent)?e.x-=200:e.x+=200;if(i.length>0){const t=this.getLowerNode(i);e.y=t.coordinates.y+60}else e.y-=120;return e}getLowerNode(t=Array.from(this.nodes.values())){if(t.length>0){let e=t[0].coordinates.y,i=t[0];for(const n of t)n.coordinates.y>e&&(e=n.coordinates.y,i=n);return i}}moveSelectionOnLevel(t){if(!this.selectedNode.isRoot()){let e=this.getSiblings(this.selectedNode).filter(e=>t===e.coordinates.y<this.selectedNode.coordinates.y);if(this.selectedNode.parent.isRoot()&&(e=e.filter(t=>this.getOrientation(t)===this.getOrientation(this.selectedNode))),e.length>0){let t=e[0],i=Math.abs(e[0].coordinates.y-this.selectedNode.coordinates.y);for(const n of e){const e=Math.abs(n.coordinates.y-this.selectedNode.coordinates.y);e<i&&(i=e,t=n)}this.selectNode(t.id)}}}moveSelectionOnBranch(t){if(!1===this.getOrientation(this.selectedNode)&&t||!0===this.getOrientation(this.selectedNode)&&!t)this.selectNode(this.selectedNode.parent.id);else{let e=this.getChildren(this.selectedNode);void 0===this.getOrientation(this.selectedNode)&&(e=e.filter(e=>this.getOrientation(e)===t));const i=this.getLowerNode(e);e.length>0&&this.selectNode(i.id)}}}class gn{constructor(t){this._map=t}asJSON(){const t=this._map.history.current();return this._map.events.call(an.exportJSON),sn.cloneObject(t)}asImage(t,e){"function"!=typeof t&&on.error("The first parameter must be a function","type"),e&&"string"!=typeof e&&on.error("The second optional parameter must be a string","type"),this._map.nodes.deselectNode(),this.dataURI(i=>{const n=new Image;n.src=i,n.onload=()=>{const i=document.createElement("canvas"),o=i.getContext("2d");i.width=n.width,i.height=n.height,o.drawImage(n,0,0),o.globalCompositeOperation="destination-over",o.fillStyle="#ffffff",o.fillRect(0,0,i.width,i.height),"string"==typeof e&&(e="image/"+e),t(i.toDataURL(e)),this._map.events.call(an.exportImage)},n.onerror=()=>{on.error("The image has not been loaded correctly")}})}dataURI(t){const e=this._map.dom.g.node(),i=e.cloneNode(!0),n=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=e.getBBox(),s=sn.cssRules(e),r="http://www.w3.org/2000/xmlns/",a=o.x-15,h=o.y-15,c=o.width+30,l=o.height+30;if(n.setAttributeNS(r,"xmlns","http://www.w3.org/2000/svg"),n.setAttributeNS(r,"xmlns:xlink","http://www.w3.org/1999/xlink"),n.setAttribute("version","1.1"),n.setAttribute("width",c),n.setAttribute("height",l),n.setAttribute("viewBox",[a,h,c,l].join(" ")),""!==s){const t=document.createElement("style"),e=document.createElement("defs");t.setAttribute("type","text/css"),t.innerHTML="<![CDATA[\n"+s+"\n]]>",e.appendChild(t),n.appendChild(e)}i.setAttribute("transform","translate(0,0)"),n.appendChild(i),this.convertImages(i,()=>{const e=new XMLSerializer,i=new FileReader,o=new Blob([e.serializeToString(n)],{type:"image/svg+xml"});i.readAsDataURL(o),i.onloadend=()=>{t(i.result)}})}convertImages(t,e){let i=t.querySelectorAll("image"),n=i.length;if(n>0)for(const o of i){const t=document.createElement("canvas"),i=t.getContext("2d"),s=new Image,r=o.getAttribute("href");s.crossOrigin="Anonymous",s.src=r,s.onload=function(){t.width=s.width,t.height=s.height,i.drawImage(s,0,0),o.setAttribute("href",t.toDataURL("image/png")),n--,0===n&&e()},s.onerror=()=>{n--,0===n&&e()}}else e()}}class mn{constructor(t){this.copy=t=>{t&&"string"!=typeof t&&on.error("The node id must be a string","type");const e=t?this.map.nodes.getNode(t):this.map.nodes.getSelectedNode();void 0===e&&on.error('There are no nodes with id "'+t+'"'),e.isRoot()?on.error("The root node can not be copied"):(this.copiedNodes=[this.map.nodes.getNodeProperties(e,!1)],this.map.nodes.getDescendants(e).forEach(t=>{this.copiedNodes.push(this.map.nodes.getNodeProperties(t,!1))}))},this.cut=t=>{t&&"string"!=typeof t&&on.error("The node id must be a string","type");const e=t?this.map.nodes.getNode(t):this.map.nodes.getSelectedNode();void 0===e&&on.error('There are no nodes with id "'+t+'"'),e.isRoot()?on.error("The root node can not be cut"):(this.copiedNodes=[this.map.nodes.getNodeProperties(e,!1)],this.map.nodes.getDescendants(e).forEach(t=>{this.copiedNodes.push(this.map.nodes.getNodeProperties(t,!1))}),this.map.nodes.removeNode(e.id))},this.paste=t=>{void 0===this.copiedNodes&&on.error("There are not nodes in the mmp clipboard"),t&&"string"!=typeof t&&on.error("The node id must be a string","type");const e=t?this.map.nodes.getNode(t):this.map.nodes.getSelectedNode();void 0===e&&on.error('There are no nodes with id "'+t+'"');const i=this.map.nodes.getRoot(),n=(t,e)=>{let o;if(t.id!==this.copiedNodes[0].id){o={x:0,y:0};const n=this.copiedNodes.find(e=>e.id===t.parent);let s=n.coordinates.x-t.coordinates.x;const r=n.coordinates.y-t.coordinates.y,a=this.map.nodes.getOrientation(e);n.coordinates.x<i.coordinates.x!==a&&(s=-s),o.x=e.coordinates.x-s,o.y=e.coordinates.y-r,o=this.map.nodes.fixCoordinates(o,!0)}const s=sn.cloneObject(t);this.map.nodes.addNode({name:s.name,coordinates:o,image:s.image,colors:s.colors,font:s.font,locked:s.locked},e.id);const r=this.copiedNodes.filter(e=>e.parent===t.id);if(r.length>0){const t=this.map.nodes.getNodes();e=t[t.length-1],r.forEach(t=>{n(t,e)})}};n(this.copiedNodes[0],e)},this.map=t}}class _n{constructor(t,e){var i;return this.id=t,this.dom={},this.events=new rn,this.options=new ln(e,this),this.zoom=new hn(this),this.history=new dn(this),this.drag=new pn(this),this.draw=new cn(this),this.nodes=new fn(this),this.export=new gn(this),this.copyPaste=new mn(this),this.draw.create(),!0===this.options.centerOnResize&&Ot(window).on("resize."+this.id,()=>{this.zoom.center()}),!0===this.options.zoom&&(null===(i=this.dom.svg)||void 0===i||i.call(this.zoom.getZoomBehavior()).on("dblclick.zoom",null)),this.nodes.addRootNode(),this.history.save(),this.createMindapInstance()}remove(){var t;null===(t=this.dom.svg)||void 0===t||t.remove();const e=Object.keys(this.instance);for(let i=0;i<e.length;i++)delete this.instance[e[i]]}createMindapInstance(){return this.instance={on:this.events.on.bind(this.events),remove:this.remove.bind(this),new:this.history.new.bind(this.history),updateOptions:this.options.update.bind(this.options),exportAsJSON:this.export.asJSON.bind(this.export),exportAsImage:this.export.asImage.bind(this.export),updateNodeContent:this.history.save.bind(this.history),history:this.history.getHistory.bind(this.history),undo:this.history.undo.bind(this.history),redo:this.history.redo.bind(this.history),zoomIn:this.zoom.zoomIn.bind(this.zoom),zoomOut:this.zoom.zoomOut.bind(this.zoom),center:this.zoom.center.bind(this.zoom),addNode:this.nodes.addNode.bind(this.nodes),selectNode:this.nodes.selectNode.bind(this.nodes),editNode:this.nodes.editNode.bind(this.nodes),deselectNode:this.nodes.deselectNode.bind(this.nodes),nodeChildren:this.nodes.nodeChildren.bind(this.nodes),updateNode:this.nodes.updateNode.bind(this.nodes),removeNode:this.nodes.removeNode.bind(this.nodes),copyNode:this.copyPaste.copy.bind(this.copyPaste),cutNode:this.copyPaste.cut.bind(this.copyPaste),pasteNode:this.copyPaste.paste.bind(this.copyPaste)}}}function yn(t,e){return new _n(t,e)}},rDax:function(t,e,i){"use strict";i.d(e,"a",function(){return V}),i.d(e,"b",function(){return S}),i.d(e,"c",function(){return W}),i.d(e,"d",function(){return A});var n=i("vxfF"),o=i("fXoL"),s=i("nLfN"),r=i("cH1L"),a=i("ofXK"),h=i("8LU1"),c=i("+rOU"),l=i("XNiG"),u=i("quSY"),d=i("VRyK"),p=i("IzEk"),f=i("1G5W");i("7o/Q"),i("FtGj");const g=Object(s.f)();class m{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Object(h.c)(-this._previousScrollPosition.left),t.style.top=Object(h.c)(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,e=t.style,i=this._document.body.style,n=e.scrollBehavior||"",o=i.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),g&&(e.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),g&&(e.scrollBehavior=n,i.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}}class _{constructor(t,e,i,n){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=n,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class y{enable(){}disable(){}attach(){}}function v(t,e){return e.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function b(t,e){return e.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class w{constructor(t,e,i,n){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=n,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:e,height:i}=this._viewportRuler.getViewportSize();v(t,[{width:e,height:i,bottom:i,right:e,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let x=(()=>{class t{constructor(t,e,i,n){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this.noop=()=>new y,this.close=t=>new _(this._scrollDispatcher,this._ngZone,this._viewportRuler,t),this.block=()=>new m(this._viewportRuler,this._document),this.reposition=t=>new w(this._scrollDispatcher,this._viewportRuler,this._ngZone,t),this._document=n}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(n.b),o.Sb(n.d),o.Sb(o.A),o.Sb(a.d))},t.\u0275prov=Object(o.Hb)({factory:function(){return new t(Object(o.Sb)(n.b),Object(o.Sb)(n.d),Object(o.Sb)(o.A),Object(o.Sb)(a.d))},token:t,providedIn:"root"}),t})();class S{constructor(t){if(this.scrollStrategy=new y,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class O{constructor(t,e,i,n,o){this.offsetX=i,this.offsetY=n,this.panelClass=o,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class N{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let k=(()=>{class t{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this.detach()}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(a.d))},t.\u0275prov=Object(o.Hb)({factory:function(){return new t(Object(o.Sb)(a.d))},token:t,providedIn:"root"}),t})(),C=(()=>{class t extends k{constructor(t){super(t),this._keydownListener=t=>{const e=this._attachedOverlays;for(let i=e.length-1;i>-1;i--)if(e[i]._keydownEvents.observers.length>0){e[i]._keydownEvents.next(t);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(a.d))},t.\u0275prov=Object(o.Hb)({factory:function(){return new t(Object(o.Sb)(a.d))},token:t,providedIn:"root"}),t})(),R=(()=>{class t extends k{constructor(t,e){super(t),this._platform=e,this._cursorStyleIsSet=!1,this._clickListener=t=>{const e=t.composedPath?t.composedPath()[0]:t.target,i=this._attachedOverlays.slice();for(let n=i.length-1;n>-1;n--){const o=i[n];if(!(o._outsidePointerEvents.observers.length<1)&&o.hasAttached()){if(o.overlayElement.contains(e))break;o._outsidePointerEvents.next(t)}}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("click",this._clickListener,!0),this._document.body.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=this._document.body.style.cursor,this._document.body.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("click",this._clickListener,!0),this._document.body.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(a.d),o.Sb(s.a))},t.\u0275prov=Object(o.Hb)({factory:function(){return new t(Object(o.Sb)(a.d),Object(o.Sb)(s.a))},token:t,providedIn:"root"}),t})();const P=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine);let E=(()=>{class t{constructor(t,e){this._platform=e,this._document=t}ngOnDestroy(){const t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||P){const e=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])}const e=this._document.createElement("div");e.classList.add(t),P?e.setAttribute("platform","test"):this._platform.isBrowser||e.setAttribute("platform","server"),this._document.body.appendChild(e),this._containerElement=e}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(a.d),o.Sb(s.a))},t.\u0275prov=Object(o.Hb)({factory:function(){return new t(Object(o.Sb)(a.d),Object(o.Sb)(s.a))},token:t,providedIn:"root"}),t})();class A{constructor(t,e,i,n,o,s,r,a,h){this._portalOutlet=t,this._host=e,this._pane=i,this._config=n,this._ngZone=o,this._keyboardDispatcher=s,this._document=r,this._location=a,this._outsideClickDispatcher=h,this._backdropElement=null,this._backdropClick=new l.a,this._attachments=new l.a,this._detachments=new l.a,this._locationChanges=u.a.EMPTY,this._backdropClickHandler=t=>this._backdropClick.next(t),this._keydownEvents=new l.a,this._outsidePointerEvents=new l.a,n.scrollStrategy&&(this._scrollStrategy=n.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=n.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Object(p.a)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Object(h.c)(this._config.width),t.height=Object(h.c)(this._config.height),t.minWidth=Object(h.c)(this._config.minWidth),t.minHeight=Object(h.c)(this._config.minHeight),t.maxWidth=Object(h.c)(this._config.maxWidth),t.maxHeight=Object(h.c)(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t,e=this._backdropElement;if(!e)return;let i=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",i),e.parentNode&&e.parentNode.removeChild(e)),this._backdropElement==e&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",i)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(i,500))}_toggleClasses(t,e,i){const n=t.classList;Object(h.a)(e).forEach(t=>{t&&(i?n.add(t):n.remove(t))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Object(f.a)(Object(d.a)(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}}const z="cdk-overlay-connected-position-bounding-box",M=/([A-Za-z%]+)$/;class j{constructor(t,e,i,n,o){this._viewportRuler=e,this._document=i,this._platform=n,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new l.a,this._resizeSubscription=u.a.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(z),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,n=[];let o;for(let s of this._preferredPositions){let r=this._getOriginPoint(t,s),a=this._getOverlayPoint(r,e,s),h=this._getOverlayFit(a,e,i,s);if(h.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(s,r);this._canFitWithFlexibleDimensions(h,a,i)?n.push({position:s,origin:r,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(r,s)}):(!o||o.overlayFit.visibleArea<h.visibleArea)&&(o={overlayFit:h,overlayPoint:a,originPoint:r,position:s,overlayRect:e})}if(n.length){let t=null,e=-1;for(const i of n){const n=i.boundingBoxRect.width*i.boundingBoxRect.height*(i.position.weight||1);n>e&&(e=n,t=i)}return this._isPushed=!1,void this._applyPosition(t.position,t.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&T(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(z),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let i,n;if("center"==e.originX)i=t.left+t.width/2;else{const n=this._isRtl()?t.right:t.left,o=this._isRtl()?t.left:t.right;i="start"==e.originX?n:o}return n="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:i,y:n}}_getOverlayPoint(t,e,i){let n,o;return n="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,o="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+n,y:t.y+o}}_getOverlayFit(t,e,i,n){const o=B(e);let{x:s,y:r}=t,a=this._getOffset(n,"x"),h=this._getOffset(n,"y");a&&(s+=a),h&&(r+=h);let c=0-r,l=r+o.height-i.height,u=this._subtractOverflows(o.width,0-s,s+o.width-i.width),d=this._subtractOverflows(o.height,c,l),p=u*d;return{visibleArea:p,isCompletelyWithinViewport:o.width*o.height===p,fitsInViewportVertically:d===o.height,fitsInViewportHorizontally:u==o.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const n=i.bottom-e.y,o=i.right-e.x,s=D(this._overlayRef.getConfig().minHeight),r=D(this._overlayRef.getConfig().minWidth),a=t.fitsInViewportHorizontally||null!=r&&r<=o;return(t.fitsInViewportVertically||null!=s&&s<=n)&&a}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const n=B(e),o=this._viewportRect,s=Math.max(t.x+n.width-o.width,0),r=Math.max(t.y+n.height-o.height,0),a=Math.max(o.top-i.top-t.y,0),h=Math.max(o.left-i.left-t.x,0);let c=0,l=0;return c=n.width<=o.width?h||-s:t.x<this._viewportMargin?o.left-i.left-t.x:0,l=n.height<=o.height?a||-r:t.y<this._viewportMargin?o.top-i.top-t.y:0,this._previousPushAmount={x:c,y:l},{x:t.x+c,y:t.y+l}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const e=this._getScrollVisibility(),i=new N(t,e);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,n=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${i} ${n}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,n=this._isRtl();let o,s,r,a,h,c;if("top"===e.overlayY)s=t.y,o=i.height-s+this._viewportMargin;else if("bottom"===e.overlayY)r=i.height-t.y+2*this._viewportMargin,o=i.height-r+this._viewportMargin;else{const e=Math.min(i.bottom-t.y+i.top,t.y),n=this._lastBoundingBoxSize.height;o=2*e,s=t.y-e,o>n&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-n/2)}if("end"===e.overlayX&&!n||"start"===e.overlayX&&n)c=i.width-t.x+this._viewportMargin,a=t.x-this._viewportMargin;else if("start"===e.overlayX&&!n||"end"===e.overlayX&&n)h=t.x,a=i.right-t.x;else{const e=Math.min(i.right-t.x+i.left,t.x),n=this._lastBoundingBoxSize.width;a=2*e,h=t.x-e,a>n&&!this._isInitialRender&&!this._growAfterOpen&&(h=t.x-n/2)}return{top:s,left:h,bottom:r,right:c,width:a,height:o}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const n={};if(this._hasExactPosition())n.top=n.left="0",n.bottom=n.right=n.maxHeight=n.maxWidth="",n.width=n.height="100%";else{const t=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;n.height=Object(h.c)(i.height),n.top=Object(h.c)(i.top),n.bottom=Object(h.c)(i.bottom),n.width=Object(h.c)(i.width),n.left=Object(h.c)(i.left),n.right=Object(h.c)(i.right),n.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",n.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",t&&(n.maxHeight=Object(h.c)(t)),o&&(n.maxWidth=Object(h.c)(o))}this._lastBoundingBoxSize=i,T(this._boundingBox.style,n)}_resetBoundingBoxStyles(){T(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){T(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},n=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(n){const n=this._viewportRuler.getViewportScrollPosition();T(i,this._getExactOverlayY(e,t,n)),T(i,this._getExactOverlayX(e,t,n))}else i.position="static";let r="",a=this._getOffset(e,"x"),c=this._getOffset(e,"y");a&&(r+=`translateX(${a}px) `),c&&(r+=`translateY(${c}px)`),i.transform=r.trim(),s.maxHeight&&(n?i.maxHeight=Object(h.c)(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(n?i.maxWidth=Object(h.c)(s.maxWidth):o&&(i.maxWidth="")),T(this._pane.style,i)}_getExactOverlayY(t,e,i){let n={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let s=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return o.y-=s,"bottom"===t.overlayY?n.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":n.top=Object(h.c)(o.y),n}_getExactOverlayX(t,e,i){let n,o={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),n=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===n?o.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":o.left=Object(h.c)(s.x),o}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(t=>t.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:b(t,i),isOriginOutsideView:v(t,i),isOverlayClipped:b(e,i),isOverlayOutsideView:v(e,i)}}_subtractOverflows(t,...e){return e.reduce((t,e)=>t-Math.max(e,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Object(h.a)(t).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof o.l)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function T(t,e){for(let i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function D(t){if("number"!=typeof t&&null!=t){const[e,i]=t.split(M);return i&&"px"!==i?null:parseFloat(e)}return t||null}function B(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}class L{constructor(t,e,i,n,o,s,r){this._preferredPositions=[],this._positionStrategy=new j(i,n,o,s,r).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,i,n){const o=new O(t,e,i,n);return this._preferredPositions.push(o),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}const I="cdk-global-overlay-wrapper";class H{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(I),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:n,height:o,maxWidth:s,maxHeight:r}=i,a=!("100%"!==n&&"100vw"!==n||s&&"100%"!==s&&"100vw"!==s),h=!("100%"!==o&&"100vh"!==o||r&&"100%"!==r&&"100vh"!==r);t.position=this._cssPosition,t.marginLeft=a?"0":this._leftOffset,t.marginTop=h?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,a?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=h?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(I),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let X=(()=>{class t{constructor(t,e,i,n){this._viewportRuler=t,this._document=e,this._platform=i,this._overlayContainer=n}global(){return new H}connectedTo(t,e,i){return new L(e,i,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new j(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(n.d),o.Sb(a.d),o.Sb(s.a),o.Sb(E))},t.\u0275prov=Object(o.Hb)({factory:function(){return new t(Object(o.Sb)(n.d),Object(o.Sb)(a.d),Object(o.Sb)(s.a),Object(o.Sb)(E))},token:t,providedIn:"root"}),t})(),F=0,V=(()=>{class t{constructor(t,e,i,n,o,s,r,a,h,c,l){this.scrollStrategies=t,this._overlayContainer=e,this._componentFactoryResolver=i,this._positionBuilder=n,this._keyboardDispatcher=o,this._injector=s,this._ngZone=r,this._document=a,this._directionality=h,this._location=c,this._outsideClickDispatcher=l}create(t){const e=this._createHostElement(),i=this._createPaneElement(e),n=this._createPortalOutlet(i),o=new S(t);return o.direction=o.direction||this._directionality.value,new A(n,e,i,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const e=this._document.createElement("div");return e.id="cdk-overlay-"+F++,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(o.g)),new c.d(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(x),o.Sb(E),o.Sb(o.j),o.Sb(X),o.Sb(C),o.Sb(o.s),o.Sb(o.A),o.Sb(a.d),o.Sb(r.b),o.Sb(a.g),o.Sb(R))},t.\u0275prov=o.Hb({token:t,factory:t.\u0275fac}),t})();const Y={provide:new o.r("cdk-connected-overlay-scroll-strategy"),deps:[V],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let W=(()=>{class t{}return t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({factory:function(e){return new(e||t)},providers:[V,Y],imports:[[r.a,c.e,n.c],n.c]}),t})()},vxfF:function(t,e,i){"use strict";i.d(e,"a",function(){return C}),i.d(e,"b",function(){return N}),i.d(e,"c",function(){return R}),i.d(e,"d",function(){return k});var n=i("8LU1"),o=i("fXoL"),s=i("XNiG"),r=i("LRne"),a=i("HDdC"),h=i("DH7j"),c=i("n6bG"),l=i("lJxs");function u(t,e,i,n){return Object(c.a)(i)&&(n=i,i=void 0),n?u(t,e,i).pipe(Object(l.a)(t=>Object(h.a)(t)?n(...t):n(t))):new a.a(n=>{d(t,e,function(t){n.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},n,i)})}function d(t,e,i,n,o){let s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const n=t;t.addEventListener(e,i,o),s=()=>n.removeEventListener(e,i,o)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const n=t;t.on(e,i),s=()=>n.off(e,i)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const n=t;t.addListener(e,i),s=()=>n.removeListener(e,i)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let s=0,r=t.length;s<r;s++)d(t[s],e,i,n,o)}n.add(s)}i("3N8a"),i("IjjT"),i("quSY"),i("7o/Q");var p=i("D0XW"),f=i("zx2A");class g{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new m(t,this.durationSelector))}}class m extends f.b{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let i;try{const{durationSelector:e}=this;i=e(t)}catch(e){return this.destination.error(e)}const n=Object(f.c)(i,new f.a(this));!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}clearThrottle(){const{value:t,hasValue:e,throttled:i}=this;i&&(this.remove(i),this.throttled=void 0,i.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function _(t){return!Object(h.a)(t)&&t-parseFloat(t)+1>=0}var y=i("z+Ro");function v(t){const{index:e,period:i,subscriber:n}=t;if(n.next(e),!n.closed){if(-1===i)return n.complete();t.index=e+1,this.schedule(t,i)}}function b(t,e=p.a){return i=()=>function(t=0,e,i){let n=-1;return _(e)?n=Number(e)<1?1:Number(e):Object(y.a)(e)&&(i=e),Object(y.a)(i)||(i=p.a),new a.a(e=>{const o=_(t)?t:+t-i.now();return i.schedule(v,o,{index:0,period:n,subscriber:e})})}(t,e),function(t){return t.lift(new g(i))};var i}var w=i("pLZG");i("1G5W"),i("JX91"),i("eIep"),i("EY2u"),i("z6cu"),i("9ppp"),i("Ylt2");var x=i("nLfN"),S=i("ofXK"),O=i("cH1L");let N=(()=>{class t{constructor(t,e,i){this._ngZone=t,this._platform=e,this._scrolled=new s.a,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new a.a(e=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(b(t)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Object(r.a)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(t,e){const i=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(Object(w.a)(t=>!t||i.indexOf(t)>-1))}getAncestorScrollContainers(t){const e=[];return this.scrollContainers.forEach((i,n)=>{this._scrollableContainsElement(n,t)&&e.push(n)}),e}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,e){let i=Object(n.d)(e),o=t.getElementRef().nativeElement;do{if(i==o)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>u(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(o.A),o.Sb(x.a),o.Sb(S.d,8))},t.\u0275prov=Object(o.Hb)({factory:function(){return new t(Object(o.Sb)(o.A),Object(o.Sb)(x.a),Object(o.Sb)(S.d,8))},token:t,providedIn:"root"}),t})(),k=(()=>{class t{constructor(t,e,i){this._platform=t,this._change=new s.a,this._changeListener=t=>{this._change.next(t)},this._document=i,e.runOutsideAngular(()=>{if(t.isBrowser){const t=this._getWindow();t.addEventListener("resize",this._changeListener),t.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:e,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+e,height:i,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,e=this._getWindow(),i=t.documentElement,n=i.getBoundingClientRect();return{top:-n.top||t.body.scrollTop||e.scrollY||i.scrollTop||0,left:-n.left||t.body.scrollLeft||e.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(b(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(x.a),o.Sb(o.A),o.Sb(S.d,8))},t.\u0275prov=Object(o.Hb)({factory:function(){return new t(Object(o.Sb)(x.a),Object(o.Sb)(o.A),Object(o.Sb)(S.d,8))},token:t,providedIn:"root"}),t})(),C=(()=>{class t{}return t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({factory:function(e){return new(e||t)}}),t})(),R=(()=>{class t{}return t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({factory:function(e){return new(e||t)},imports:[[O.a,x.b,C],O.a,C]}),t})()},z6cu:function(t,e,i){"use strict";i.d(e,"a",function(){return o});var n=i("HDdC");function o(t,e){return new n.a(e?i=>e.schedule(s,0,{error:t,subscriber:i}):e=>e.error(t))}function s({error:t,subscriber:e}){e.error(t)}}}]);